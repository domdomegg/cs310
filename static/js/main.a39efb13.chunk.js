(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{2:function(t,n,e){"use strict";var r=this&&this.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),o=this&&this.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),o=0;for(n=0;n<e;n++)for(var i=arguments[n],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(n,"__esModule",{value:!0}),n.typeUtils=n.ParseError=n.parse=n.PolyType=n.TypeFuncApp=n.TypeVar=n.Let=n.Abs=n.App=n.Var=n.NumberLiteral=n.CharLiteral=void 0;var i=e(28),a=function(){function t(t,n,e){this.value=t,this.pos=n,this.notes=e}return t.prototype.toString=function(){return"'"+this.value+"'"},t}();n.CharLiteral=a;var s=function(){function t(t,n,e){this.value=t,this.pos=n,this.notes=e}return t.prototype.toString=function(){return this.value.toString()},t}();n.NumberLiteral=s;var c=function(){function t(t,n,e){this.name=t,this.pos=n,this.notes=e}return t.prototype.toString=function(){return this.name},t}();n.Var=c;var u=function(){function t(t,n,e,r){this.func=t,this.arg=n,this.pos=e,this.notes=r}return t.prototype.toString=function(){return"("+this.func.toString()+" "+this.arg.toString()+")"},t}();n.App=u;var p=function(){function t(t,n,e,r){this.param=t,this.body=n,this.pos=e,this.notes=r}return t.prototype.toString=function(){return"(\\"+this.param+" -> "+this.body.toString()+")"},t}();n.Abs=p;var h=function(){function t(t,n,e,r,o){this.param=t,this.def=n,this.body=e,this.pos=r,this.notes=o}return t.prototype.toString=function(){return"(let "+this.param+" = "+this.def.toString()+" in "+this.body.toString()+")"},t}();n.Let=h;var l=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t}();n.TypeVar=l;var f=function(){function t(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];this.constructorName=t,this.args=n}return t.prototype.toString=function(){return"->"==this.constructorName?(this.args[0]instanceof t&&"->"==this.args[0].constructorName?"("+this.args[0].toString()+")":this.args[0].toString())+" -> "+this.args[1].toString():"[]"==this.constructorName?"["+this.args[0].toString()+"]":this.constructorName.startsWith(",")?"("+this.args.join(", ")+")":this.args.every((function(t){return t instanceof l||"number"==t.constructorName||"char"==t.constructorName||"boolean"==t.constructorName}))?this.constructorName+(this.args.length?" ":"")+this.args.map((function(t){return""+t.toString()})).join(" "):this.constructorName+(this.args.length?" ":"")+this.args.map((function(t){return"("+t.toString()+")"})).join(" ")},t}();n.TypeFuncApp=f;var d=function(){function t(t,n){this.quantifiedVars=t,this.monoType=n}return t.prototype.toString=function(){return(this.quantifiedVars.length?this.quantifiedVars.map((function(t){return"\u2200"+t})).join("")+": ":"")+this.monoType.toString()},t}();n.PolyType=d;var y=new f("number"),b=new f("char"),m=new f("boolean"),g=function t(n,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return 0===r.length?new f("->",n,e):new f("->",n,t.apply(void 0,o([e,r[0]],r.slice(1))))},w=function(t){return new f("[]",t)},v=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length<=1)throw new Error("Tuple has too few elements, minimum of 2 but given "+t.length);if(t.length>8)throw new Error("Tuple has too many elements, maximum of 8 but given "+t.length);return new(f.bind.apply(f,o([void 0,",".repeat(t.length-1)],t)))},j=function(t){return new f("Maybe",t)},O=function(t,n){return new f("Either",t,n)},x=new l("a"),T=new l("b"),F=new l("c"),S=new l("d"),k=function(t){return new d([],t)},C={"+":k(g(y,y,y)),"*":k(g(y,y,y)),"-":k(g(y,y,y)),"/":k(g(y,y,y)),"%":k(g(y,y,y)),negate:k(g(y,y)),abs:k(g(y,y)),signum:k(g(y,y)),even:k(g(y,m)),odd:k(g(y,m)),not:k(g(m,m)),"&&":k(g(m,m,m)),"||":k(g(m,m,m)),True:k(m),False:k(m),myNumber:k(y),myBoolean:k(m),"[]":new d(["a"],w(x)),":":new d(["a"],g(x,w(x),w(x))),cons:new d(["a"],g(x,w(x),w(x))),"++":new d(["a"],g(w(x),w(x),w(x))),head:new d(["a"],g(w(x),x)),last:new d(["a"],g(w(x),x)),tail:new d(["a"],g(w(x),w(x))),init:new d(["a"],g(w(x),w(x))),uncons:new d(["a"],g(w(x),j(v(x,w(x))))),null:new d(["a"],g(w(x),m)),length:new d(["a"],g(w(x),y)),map:new d(["a","b"],g(g(x,T),w(x),w(T))),reverse:new d(["a"],g(w(x),w(x))),intersperse:new d(["a"],g(x,w(x),w(x))),intercalate:new d(["a"],g(w(x),w(w(x)),w(x))),transpose:new d(["a"],g(w(w(x)),w(w(x)))),subsequences:new d(["a"],g(w(x),w(w(x)))),permutations:new d(["a"],g(w(x),w(w(x)))),foldl:new d(["a"],g(g(T,x,T),T,w(x),T)),"foldl'":new d(["a"],g(g(T,x,T),T,w(x),T)),foldl1:new d(["a"],g(g(x,x,x),w(x),x)),"foldl1'":new d(["a"],g(g(x,x,x),w(x),x)),foldr:new d(["a"],g(g(x,T,T),T,w(x),T)),foldr1:new d(["a"],g(g(x,x,x),w(x),x)),concat:new d(["a"],g(w(w(x)),w(x))),concatMap:new d(["a"],g(g(x,w(x)),w(x),w(T))),and:k(g(w(m),m)),or:k(g(w(m),m)),any:new d(["a"],g(g(x,m),w(x),m)),all:new d(["a"],g(g(x,m),w(x),m)),sum:k(g(w(y),y)),product:k(g(w(y),y)),maximum:k(g(w(y),y)),minimum:k(g(w(y),y)),take:new d(["a"],g(y,w(x),w(x))),drop:new d(["a"],g(y,w(x),w(x))),splitAt:new d(["a"],g(y,w(x),v(w(x),w(x)))),takeWhile:new d(["a"],g(g(x,m),w(x),w(x))),dropWhile:new d(["a"],g(g(x,m),w(x),w(x))),elem:new d(["a"],g(x,w(x),m)),notElem:new d(["a"],g(x,w(x),m)),lookup:new d(["a","b"],g(x,w(v(x,T)),j(T))),find:new d(["a"],g(g(x,m),w(x),j(x))),filter:new d(["a"],g(g(x,m),w(x),w(x))),partition:new d(["a"],g(g(x,m),w(x),v(w(x),w(x)))),"!!":new d(["a"],g(w(x),y,x)),zip:new d(["a","b"],g(w(x),w(T),w(v(x,T)))),zipWith:new d(["a","b","c"],g(g(x,T,F),w(x),w(T),w(F))),unzip:new d(["a","b"],g(w(v(x,T)),v(w(x),w(T)))),nub:new d(["a"],g(w(x),w(x))),delete:new d(["a"],g(x,w(x),w(x))),union:new d(["a"],g(w(x),w(x),w(x))),intersect:new d(["a"],g(w(x),w(x),w(x))),sort:new d(["a"],g(w(x),w(x))),",":new d(["a","b"],g(x,T,v(x,T))),",,":new d(["a","b","c"],g(x,T,F,v(x,T,F))),",,,":new d(["a","b","c","d"],g(x,T,F,S,v(x,T,F,S))),t:new d(["a","b"],g(x,T,v(x,T))),tt:new d(["a","b","c"],g(x,T,F,v(x,T,F))),ttt:new d(["a","b","c","d"],g(x,T,F,S,v(x,T,F,S))),fst:new d(["a","b"],g(v(x,T),x)),snd:new d(["a","b"],g(v(x,T),T)),curry:new d(["a","b","c"],g(g(v(x,T),F),x,T,F)),uncurry:new d(["a","b","c"],g(g(x,T,F),v(x,T),F)),Just:new d(["a"],g(x,j(x))),Nothing:new d(["a"],j(x)),Left:new d(["a","b"],g(x,O(x,T))),Right:new d(["a","b"],g(T,O(x,T))),id:new d(["a"],g(x,x))},A=function(t){function n(n){var e=t.call(this,n)||this;return e.name="ParseError",e}return r(n,t),n}(Error);n.ParseError=A;var N=new i.GenLex,P=N.tokenize(i.C.charIn("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789*+-/%<>^:_|&!'").rep().map((function(t){return t.join()})),"identifier"),_=N.tokenize(i.C.string("let "),"let"),E=N.tokenize(i.C.string("in "),"in"),z=N.tokenize(i.C.charLiteral(),"char"),V=N.tokenize(i.C.stringLiteral(),"string"),L=N.tokenize(i.N.number(),"number"),I=N.tokenize(i.C.char("["),"lbracket"),W=N.tokenize(i.C.char("]"),"rbracket"),q=N.tokenize(i.C.char("\\"),"backslash"),M=N.tokenize(i.C.string("->"),"arrow"),J=N.tokenize(i.C.char("("),"lparen"),B=N.tokenize(i.C.char(")"),"rparen"),H=N.tokenize(i.C.char("="),"equal"),U=N.tokenize(i.C.char(","),"comma"),G=function(){return i.F.try(ot()).or(i.F.try(nt())).or(i.F.try(R()))},R=function(){return i.F.try(it($())).or(i.F.try(it(tt()))).or(i.F.try(it(rt()))).or(i.F.try(it(et())))},D=function(){return i.F.try($()).or(i.F.try(tt())).or(i.F.try(rt())).or(i.F.try(et()))},K=function(t,n){for(var e=t.split(""),r=Y(n),o=new c("[]",{start:r.end-1,end:r.end}),i=e.length-1;i>=0;i--){var s={start:r.start+1+i,end:r.start+2+i};o=new u(new u(new c(":",s),new a(e[i],s),s),o,{start:r.start+1+i,end:r.end-1})}return o.pos.start=r.start,o.pos.end=r.end,o},Q=function(t){for(var n=t.first(),e=t.last(),r=t.at(1).map((function(t){return t.array()})).orElse([]),o={start:n,end:e},i=new c("[]",{start:o.end-1,end:o.end}),a=r.length-1;a>=0;a--)i=new u(new u(new c(":",r[a].pos),r[a],r[a].pos),i,{start:r[a].pos.start,end:o.end});return i.pos.start=o.start,i.pos.end=o.end,i},X=function(t){var n=t.first(),e=t.last(),r=t.at(1),i=st(o([new c(",".repeat(r.length-1),{start:n,end:n+1})],r));return i.pos.start=n,i.pos.end=e,i},Y=function(t){var n=t.getOffset()-1,e=t.input.location(n),r=t.input.location(n+1),o=t.input.source.input.source.slice(e,r);return{start:e,end:r-(o.length-o.trimEnd().length)}},Z=function(t,n){var e=n.input.source.input.source;return t.pos.end+=e.slice(t.pos.end).indexOf(")")+1,t.pos.start=e.slice(0,t.pos.start).lastIndexOf("("),t},$=function(){return i.F.try(L.map((function(t,n){return new s(t,Y(n))}))).or(i.F.try(V.map(K))).or(i.F.try(z.map((function(t,n){return new a(t,Y(n))})))).or(i.F.try(I.map((function(t,n){return n.location()-1})).then(i.F.lazy(G).then(U.drop().then(i.F.lazy(G)).optrep()).opt()).then(W.map((function(t,n){return Y(n).end}))).map(Q))).or(i.F.try(J.map((function(t,n){return n.location()-1})).then(i.F.lazy(G).then(U.drop().then(i.F.lazy(G)).rep()).array()).then(B.map((function(t,n){return Y(n).end}))).map(X))).or(i.F.try(P.map((function(t,n){return new c(t,Y(n))}))))},tt=function(){return J.drop().then(nt()).then(B.drop()).single().map(Z)},nt=function(){return q.map((function(t,n){return n.location()-1})).then(P).then(M.drop()).then(i.F.lazy(R)).map((function(t,n){return new p(t.at(1),t.at(2),{start:t.at(0),end:n.location()})}))},et=function(){return J.drop().then(i.F.lazy(R)).then(B.drop()).single().map(Z)},rt=function(){return J.drop().then(ot()).then(B.drop()).single().map(Z)},ot=function(){return _.map((function(t,n){return Y(n).start})).then(P).then(H.drop()).then(i.F.lazy(R)).then(E.drop()).then(i.F.lazy(R)).map((function(t,n){return new h(t.at(1),t.at(2),t.at(3),{start:t.at(0),end:n.location()})}))},it=function(t){return t.then(at()).array().map(st)},at=function(){return i.F.lazy(D).optrep()},st=function(t){return t.reduce((function(t,n){return new u(t,n,{start:t.pos.start,end:n.pos.end})}))},ct=N.use(G().then(i.F.eos().drop()).single());n.parse=function(t,n){void 0===n&&(n=!1);var e=function(t){return"let"==t||t.endsWith(" let")?{accepted:!1,issuePosition:{start:t.length-3,end:t.length},message:"Failed to parse"}:"in"==t||t.endsWith(" in")?{accepted:!1,issuePosition:{start:t.length-2,end:t.length},message:"Failed to parse"}:void 0}(t);if(e){if(n)return e;throw new A("Failed to parse:\n\t"+t+"\n\t"+" ".repeat(e.issuePosition.start)+"^")}var r=ct.parse(i.Streams.ofString(t));if(n)return r.isAccepted()?{accepted:!0,value:r.value}:{accepted:!1,issuePosition:{start:r.location(),end:t.length},message:"Failed to parse"};if(r.isAccepted())return r.value;throw new A("Failed to parse:\n\t"+t+"\n\t"+" ".repeat(r.location())+"^")};var ut={number:y,char:b,boolean:m,f:g,list:w,tuple:v,maybe:j,either:O,a:x,b:T,c:F,d:S,pt:k,standardCtx:C};n.typeUtils=ut},20:function(t,n,e){"use strict";var r=this&&this.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),o=0;for(n=0;n<e;n++)for(var i=arguments[n],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(n,"__esModule",{value:!0}),n.apply=n.infer=n.unify=n.combine=n.substitute=n.TypeInferenceError=void 0;var a=e(2),s=function(t){function n(n){var e=t.call(this,n)||this;return e.name="TypeInferenceError",e}return r(n,t),n}(Error);function c(t,n){var e=n,r={};for(var o in e)r[o]=g(e[o],t);return r}function u(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];if(t.length>2)return u(t[0],u.apply(void 0,t.slice(1)));var e=t[0],r=t[1],o={};for(var i in e)o[i]=g(e[i],r);for(var i in r)i in e||(o[i]=r[i]);return o}function p(t,n){var e;if(t instanceof a.TypeVar){if(w(n,t))throw new s("Contains/occurs check failed with "+JSON.stringify(t)+" and "+JSON.stringify(n));return(e={})[t.name]=n,e}if(n instanceof a.TypeVar)return p(n,t);if(t instanceof a.TypeFuncApp&&n instanceof a.TypeFuncApp){if(t.constructorName!==n.constructorName)throw new s("Could not unify types `"+t.toString()+"` and `"+n.toString()+"` with different constructors `"+t.constructorName+"` and `"+n.constructorName+"`");if(t.args.length!==n.args.length)throw new s("Could not unify types `"+t.toString()+"` and `"+n.toString()+"` with different argument list lengths `"+t.args.length+"` and `"+n.args.length+"`");for(var r={},o=0;o<t.args.length;o++)r=u(r,p(g(t.args[o],r),g(n.args[o],r)));return r}throw new Error("Internal error, this should never happen")}function h(t,n){var e=new Set(n);return t.filter((function(t){return!e.has(t)}))}function l(t){if(t instanceof a.PolyType)return h(l(t.monoType),t.quantifiedVars);if(t instanceof a.TypeVar)return[t.name];if(t instanceof a.TypeFuncApp)return t.args.map(l).reduce((function(t,n){return i(t,n)}),[]);if(t)return Object.values(t).map(l).reduce((function(t,n){return i(t,n)}),[]);throw new Error("Internal error, this should never happen")}function f(t,n){return new a.PolyType(function(t){var n=[];return new Set(t).forEach((function(t){return n.push(t)})),n}(h(l(n),l(t))),n)}n.TypeInferenceError=s,n.substitute=c,n.combine=u,n.unify=p,n.infer=function(t,n,e){void 0===n&&(n=!1),void 0===e&&(e=a.typeUtils.standardCtx);var r=0,o=function(){return"t"+r++};if(!n)return b(t,e,o)[0];var i=[];try{return{accepted:!0,value:{type:b(t,e,o,(function(n,e){i.push({message:n,ast:d(t,e)})}))[0],steps:i}}}catch(c){return{accepted:!1,value:{steps:i},issuePosition:c.name==s.name?c.expr.pos:t.pos,message:c.message}}};var d=function t(n,e){if(n instanceof a.CharLiteral)return new a.CharLiteral(n.value,n.pos,e.get(n));if(n instanceof a.NumberLiteral)return new a.NumberLiteral(n.value,n.pos,e.get(n));if(n instanceof a.Var)return new a.Var(n.name,n.pos,e.get(n));if(n instanceof a.App)return new a.App(t(n.func,e),t(n.arg,e),n.pos,e.get(n));if(n instanceof a.Abs)return new a.Abs(n.param,t(n.body,e),n.pos,e.get(n));if(n instanceof a.Let)return new a.Let(n.param,t(n.def,e),t(n.body,e),n.pos,e.get(n));throw new Error("Internal error, this should never happen")},y=function(t){var n=new Map;return n.set(t,"highlight"),n};function b(t,n,e,r){var i,h,l,d;if(void 0===r&&(r=function(){}),t instanceof a.CharLiteral)return r("We know the primitive `"+t.toString()+"` is a `char`",y(t)),[m(new a.PolyType([],new a.TypeFuncApp("char")),e),{}];if(t instanceof a.NumberLiteral)return r("We know the primitive `"+t.toString()+"` is a `number`",y(t)),[m(new a.PolyType([],new a.TypeFuncApp("number")),e),{}];if(t instanceof a.Var){if(!(z=n[t.name])){r("We try to look up the variable `"+t.toString()+"` but find it is not in scope. We stop here as this is an error.",y(t));var w=new s("`"+t.name+"` is not in scope");throw w.expr=t,w}var v=m(z,e);return r("We can look up the variable `"+t.toString()+"` and find it has type `"+z.toString()+(z.quantifiedVars.length?"`\nWe instatiate this type with fresh type variables to get `"+v.toString()+"`":""),y(t)),[v,{}]}if(t instanceof a.App){var j=b(t.func,n,e,r),O=j[0],x=j[1],T=b(t.arg,c(x,n),e,r),F=T[0],S=T[1],k=new a.TypeVar(e()),C=O instanceof a.TypeFuncApp&&"->"==O.constructorName?"In function application, the function must accept the expected argument type.\nBefore unification, the function has type `"+O.toString()+"`\n\nTherefore we unify:\nFunction accepts `"+O.args[0].toString()+"`\nArgument has type `"+F.toString()+"`\n\n":"In function application, the function must accept the expected argument type and returns some other type.\n\nTherefore we unify:\nFunction type `"+O.toString()+"`\nArgument to fresh type `"+new a.TypeFuncApp("->",F,k).toString()+"`\n\n",A=void 0;try{A=p(g(O,S),new a.TypeFuncApp("->",F,k))}catch(w){throw r(C+"However, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+w.message,y(t)),w.expr=t,w}var N=g(k,A);return r(C+"This gives the substitution `"+(l=A,d=k.name,("{ "+Object.keys(l).filter((function(t){return t!==d})).map((function(t){return t+" \u21a6 "+l[t].toString()})).join(", ")+" }").replace("{  }","{}")+"`\nAnd the function's return type as `")+N.toString()+"`",y(t)),[N,u(x,S,A)]}if(t instanceof a.Abs){k=new a.TypeVar(e());r("Our function definition binds `"+t.param+"` in the body to the fresh type `"+k.toString()+"`",y(t));var P=b(t.body,o(o({},n),((i={})[t.param]=new a.PolyType([],k),i)),e,r),_=P[0],E=P[1],z=g(new a.TypeFuncApp("->",k,_),E);return r((E[k.name]?"We apply the substitution `{ "+k.name+" \u21a6 "+E[k.name].toString()+" }` to get the parameter's type `"+z.args[0].toString()+"`.\n":"")+"The return type is given by the function body's type `"+z.args[1].toString()+"`\nTherefore the overall type is `"+z.toString()+"`",y(t)),[z,E]}if(t instanceof a.Let){var V=b(t.def,n,e,r),L=V[0],I=V[1],W=f(c(I,n),L);r("Our let statement binds `"+t.param+"` in the body to the type `"+W.toString()+"`",y(t));var q=b(t.body,o(o({},c(I,n)),((h={})[t.param]=W,h)),e,r);_=q[0],E=q[1];return r("Our let statement then takes its body's type `"+_.toString()+"`",y(t)),[_,u(I,E)]}throw new Error("Internal error, this should never happen")}function m(t,n,e,r){if(void 0===e&&(e=[]),void 0===r&&(r=[]),t instanceof a.TypeVar){var o=e.indexOf(t.name);return-1===o?t:new a.TypeVar(r[o])}if(t instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,i([void 0,t.constructorName],t.args.map((function(t){return m(t,n,e,r)})))));if(t instanceof a.PolyType)return m(t.monoType,n,t.quantifiedVars,t.quantifiedVars.map(n));throw new Error("Internal error, this should never happen")}function g(t,n){if(t instanceof a.TypeVar)return t.name in n?n[t.name]:t;if(t instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,i([void 0,t.constructorName],t.args.map((function(t){return g(t,n)})))));if(t instanceof a.PolyType)return new a.PolyType(t.quantifiedVars,g(t.monoType,n));throw new Error("Internal error, this should never happen")}function w(t,n){if(t instanceof a.TypeVar)return t.name==n.name;if(t instanceof a.TypeFuncApp)return t.args.some((function(t){return w(t,n)}));if(t instanceof a.PolyType)return w(t.monoType,n)&&!t.quantifiedVars.includes(n.name);throw new Error("Internal error, this should never happen")}n.apply=g},27:function(t,n,e){},37:function(t,n,e){"use strict";e.r(n);var r=e(0),o=e(1),i=e.n(o),a=e(19),s=e.n(a),c=e(15),u=(e(27),e(21)),p=e(2),h=e(20);function l(t){var n=t.node,e=t.hoverCallback;if(n instanceof p.CharLiteral||n instanceof p.NumberLiteral)return Object(r.jsx)(f,{node:n,hoverCallback:e,children:n.value});if(n instanceof p.Var)return Object(r.jsx)(f,{node:n,hoverCallback:e,children:n.name});if(n instanceof p.App)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f,{node:n,hoverCallback:e,children:Object(r.jsx)("span",{className:"sans-serif",children:"Function application"})}),Object(r.jsx)(d,{children:Object(r.jsx)(l,{node:n.func,hoverCallback:e})}),Object(r.jsx)(d,{children:Object(r.jsx)(l,{node:n.arg,hoverCallback:e})})]});if(n instanceof p.Abs)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(f,{node:n,hoverCallback:e,children:["\u03bb",n.param]}),Object(r.jsx)(d,{symbol:"->",children:Object(r.jsx)(l,{node:n.body,hoverCallback:e})})]});if(n instanceof p.Let)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(f,{node:n,hoverCallback:e,children:["let ",n.param]}),Object(r.jsx)(d,{symbol:"=",children:Object(r.jsx)(l,{node:n.def,hoverCallback:e})}),Object(r.jsx)(d,{symbol:"in",children:Object(r.jsx)(l,{node:n.body,hoverCallback:e})})]});throw new Error("Attempted to display a node of invalid type "+typeof n)}function f(t){var n=t.children,e=t.node,o=t.hoverCallback;return Object(r.jsx)("div",{className:"ast-node "+(e.notes||""),onMouseOver:function(){return o(!0,e.pos)},onMouseOut:function(){return o(!1,e.pos)},children:n})}function d(t){var n=t.children,e=t.symbol;return Object(r.jsx)("div",{className:"ast-child","data-symbol":e,children:n})}var y=function(t){var n=t.ast,e=t.hoverCallback;return Object(r.jsx)("div",{className:"ast-view",children:Object(r.jsx)(l,{node:n,hoverCallback:e})})};var b=function(t,n){return function(e,r){t(e?[].concat(Object(u.a)(n),[{start:r.start,end:r.end,className:"highlight-white"}]):n)}},m=function(t){var n=t.code,e=t.setHighlights,i=Object(o.useMemo)((function(){return Object(p.parse)(n,!0)}),[n]);Object(o.useEffect)((function(){return e(i.accepted?[]:[{start:i.issuePosition.start,end:i.issuePosition.end,className:"highlight-error"}])}),[i,e]);var a=Object(o.useMemo)((function(){if(i.accepted)return Object(h.infer)(i.value,!0)}),[i]);if(Object(o.useEffect)((function(){return a&&e(a.accepted?[]:[{start:a.issuePosition.start,end:a.issuePosition.end,className:"highlight-error"}])}),[a,e]),!i.accepted)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"AST"}),Object(r.jsx)("p",{children:i.message})]});var s=b(e,[]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"AST"}),Object(r.jsx)(y,{ast:i.value,hoverCallback:s}),Object(r.jsx)("h2",{children:"Type derivation"}),a.value.steps.map((function(t,n){return Object(r.jsxs)("div",{className:"type-derivation-step",children:[Object(r.jsxs)("h3",{children:["Step ",n+1]}),Object(r.jsx)("p",{children:t.message.split("`").map((function(t,n){return n%2===0?t:Object(r.jsx)("code",{children:t},n)}))}),Object(r.jsx)(y,{ast:t.ast,hoverCallback:s})]},n)})),a.accepted&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Type"}),Object(r.jsx)("p",{children:Object(r.jsx)("code",{children:a.value.type.toString()})})]})]})};var g=function(){var t=Object(o.useState)("map not []"),n=Object(c.a)(t,2),e=n[0],i=n[1],a=Object(o.useState)([]),s=Object(c.a)(a,2),u=s[0],p=s[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"interactive type inference"}),Object(r.jsx)("h2",{children:"Play with algorithm W in your browser."}),Object(r.jsxs)("h2",{children:["Samples:",Object(r.jsx)("button",{onClick:function(){return i("4")},children:"4"}),Object(r.jsx)("button",{onClick:function(){return i("not")},children:"not"}),Object(r.jsx)("button",{onClick:function(){return i("not True")},children:"not True"}),Object(r.jsx)("button",{onClick:function(){return i("+")},children:"+"}),Object(r.jsx)("button",{onClick:function(){return i("map not []")},children:"map not []"}),Object(r.jsx)("button",{onClick:function(){return i("fst")},children:"fst"}),Object(r.jsx)("button",{onClick:function(){return i("Just")},children:"Just"}),Object(r.jsx)("button",{onClick:function(){return i("let x = 3 in + x")},children:"let x = 3 in + x"}),Object(r.jsxs)("button",{onClick:function(){return i("\\x -> / x 2")},children:["\\x -",">"," / x 2"]}),Object(r.jsx)("button",{onClick:function(){return i("cons 23 []")},children:"cons 23 []"})]}),Object(r.jsxs)("div",{className:"code-container",children:[Object(r.jsx)("input",{placeholder:"Enter code...",value:e,onChange:function(t){return i(t.target.value)}}),e&&u.map((function(t,n){return Object(r.jsxs)("p",{children:[e.slice(0,t.start),Object(r.jsx)("span",{className:t.className,children:e.slice(t.start,t.end)}),e.slice(t.end)]},n)}))]}),e&&Object(r.jsx)(m,{code:e,setHighlights:p})]})};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.a39efb13.chunk.js.map