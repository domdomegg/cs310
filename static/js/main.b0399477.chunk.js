(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{2:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.typeUtils=t.ParseError=t.parse=t.PolyType=t.TypeFuncApp=t.TypeVar=t.Let=t.Abs=t.App=t.Var=t.NumberLiteral=t.CharLiteral=void 0;var o=n(28),a=function(){function e(e,t,n){this.value=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return"'"+this.value+"'"},e}();t.CharLiteral=a;var s=function(){function e(e,t,n){this.value=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return this.value.toString()},e}();t.NumberLiteral=s;var c=function(){function e(e,t,n){this.name=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return this.name},e}();t.Var=c;var u=function(){function e(e,t,n,r){this.func=e,this.arg=t,this.pos=n,this.notes=r}return e.prototype.toString=function(){return"("+this.func.toString()+" "+this.arg.toString()+")"},e}();t.App=u;var l=function(){function e(e,t,n,r){this.param=e,this.body=t,this.pos=n,this.notes=r}return e.prototype.toString=function(){return"(\\"+this.param+" -> "+this.body.toString()+")"},e}();t.Abs=l;var p=function(){function e(e,t,n,r,i){this.param=e,this.def=t,this.body=n,this.pos=r,this.notes=i}return e.prototype.toString=function(){return"(let "+this.param+" = "+this.def.toString()+" in "+this.body.toString()+")"},e}();t.Let=p;var h=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e}();t.TypeVar=h;var f=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.constructorName=e,this.args=t}return e.prototype.toString=function(){return"->"==this.constructorName?(this.args[0]instanceof e&&"->"==this.args[0].constructorName?"("+this.args[0].toString()+")":this.args[0].toString())+" -> "+this.args[1].toString():"[]"==this.constructorName?"["+this.args[0].toString()+"]":this.constructorName.startsWith(",")?"("+this.args.join(", ")+")":this.args.every((function(e){return e instanceof h||"Int"==e.constructorName||"Char"==e.constructorName||"Bool"==e.constructorName}))?this.constructorName+(this.args.length?" ":"")+this.args.map((function(e){return""+e.toString()})).join(" "):this.constructorName+(this.args.length?" ":"")+this.args.map((function(e){return"("+e.toString()+")"})).join(" ")},e}();t.TypeFuncApp=f;var d=function(){function e(e,t){this.quantifiedVars=e,this.monoType=t}return e.prototype.toString=function(){return(this.quantifiedVars.length?this.quantifiedVars.map((function(e){return"\u2200"+e})).join("")+": ":"")+this.monoType.toString()},e}();t.PolyType=d;var b=new f("Int"),y=new f("Char"),j=new f("Bool"),m=function e(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return 0===r.length?new f("->",t,n):new f("->",t,e.apply(void 0,i([n,r[0]],r.slice(1))))},g=function(e){return new f("[]",e)},w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)throw new Error("Tuple has too few elements, minimum of 2 but given "+e.length);if(e.length>8)throw new Error("Tuple has too many elements, maximum of 8 but given "+e.length);return new(f.bind.apply(f,i([void 0,",".repeat(e.length-1)],e)))},v=function(e){return new f("Maybe",e)},O=function(e,t){return new f("Either",e,t)},x=new h("a"),T=new h("b"),k=new h("c"),F=new h("d"),C=function(e){return new d([],e)},S={"+":C(m(b,b,b)),"*":C(m(b,b,b)),"-":C(m(b,b,b)),"/":C(m(b,b,b)),"%":C(m(b,b,b)),negate:C(m(b,b)),abs:C(m(b,b)),signum:C(m(b,b)),even:C(m(b,j)),odd:C(m(b,j)),not:C(m(j,j)),"&&":C(m(j,j,j)),"||":C(m(j,j,j)),True:C(j),False:C(j),myNumber:C(b),myBoolean:C(j),"[]":new d(["a"],g(x)),":":new d(["a"],m(x,g(x),g(x))),cons:new d(["a"],m(x,g(x),g(x))),"++":new d(["a"],m(g(x),g(x),g(x))),head:new d(["a"],m(g(x),x)),last:new d(["a"],m(g(x),x)),tail:new d(["a"],m(g(x),g(x))),init:new d(["a"],m(g(x),g(x))),uncons:new d(["a"],m(g(x),v(w(x,g(x))))),null:new d(["a"],m(g(x),j)),length:new d(["a"],m(g(x),b)),map:new d(["a","b"],m(m(x,T),g(x),g(T))),reverse:new d(["a"],m(g(x),g(x))),intersperse:new d(["a"],m(x,g(x),g(x))),intercalate:new d(["a"],m(g(x),g(g(x)),g(x))),transpose:new d(["a"],m(g(g(x)),g(g(x)))),subsequences:new d(["a"],m(g(x),g(g(x)))),permutations:new d(["a"],m(g(x),g(g(x)))),foldl:new d(["a"],m(m(T,x,T),T,g(x),T)),"foldl'":new d(["a"],m(m(T,x,T),T,g(x),T)),foldl1:new d(["a"],m(m(x,x,x),g(x),x)),"foldl1'":new d(["a"],m(m(x,x,x),g(x),x)),foldr:new d(["a"],m(m(x,T,T),T,g(x),T)),foldr1:new d(["a"],m(m(x,x,x),g(x),x)),concat:new d(["a"],m(g(g(x)),g(x))),concatMap:new d(["a"],m(m(x,g(x)),g(x),g(T))),and:C(m(g(j),j)),or:C(m(g(j),j)),any:new d(["a"],m(m(x,j),g(x),j)),all:new d(["a"],m(m(x,j),g(x),j)),sum:C(m(g(b),b)),product:C(m(g(b),b)),maximum:C(m(g(b),b)),minimum:C(m(g(b),b)),take:new d(["a"],m(b,g(x),g(x))),drop:new d(["a"],m(b,g(x),g(x))),splitAt:new d(["a"],m(b,g(x),w(g(x),g(x)))),takeWhile:new d(["a"],m(m(x,j),g(x),g(x))),dropWhile:new d(["a"],m(m(x,j),g(x),g(x))),elem:new d(["a"],m(x,g(x),j)),notElem:new d(["a"],m(x,g(x),j)),lookup:new d(["a","b"],m(x,g(w(x,T)),v(T))),find:new d(["a"],m(m(x,j),g(x),v(x))),filter:new d(["a"],m(m(x,j),g(x),g(x))),partition:new d(["a"],m(m(x,j),g(x),w(g(x),g(x)))),"!!":new d(["a"],m(g(x),b,x)),zip:new d(["a","b"],m(g(x),g(T),g(w(x,T)))),zipWith:new d(["a","b","c"],m(m(x,T,k),g(x),g(T),g(k))),unzip:new d(["a","b"],m(g(w(x,T)),w(g(x),g(T)))),nub:new d(["a"],m(g(x),g(x))),delete:new d(["a"],m(x,g(x),g(x))),union:new d(["a"],m(g(x),g(x),g(x))),intersect:new d(["a"],m(g(x),g(x),g(x))),sort:new d(["a"],m(g(x),g(x))),",":new d(["a","b"],m(x,T,w(x,T))),",,":new d(["a","b","c"],m(x,T,k,w(x,T,k))),",,,":new d(["a","b","c","d"],m(x,T,k,F,w(x,T,k,F))),t:new d(["a","b"],m(x,T,w(x,T))),tt:new d(["a","b","c"],m(x,T,k,w(x,T,k))),ttt:new d(["a","b","c","d"],m(x,T,k,F,w(x,T,k,F))),fst:new d(["a","b"],m(w(x,T),x)),snd:new d(["a","b"],m(w(x,T),T)),curry:new d(["a","b","c"],m(m(w(x,T),k),x,T,k)),uncurry:new d(["a","b","c"],m(m(x,T,k),w(x,T),k)),Just:new d(["a"],m(x,v(x))),Nothing:new d(["a"],v(x)),Left:new d(["a","b"],m(x,O(x,T))),Right:new d(["a","b"],m(T,O(x,T))),id:new d(["a"],m(x,x))},N=function(e){function t(t){var n=e.call(this,t)||this;return n.name="ParseError",n}return r(t,e),t}(Error);t.ParseError=N;var A=new o.GenLex,P=A.tokenize(o.C.charIn("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789*+-/%<>^:_|&!'").rep().map((function(e){return e.join()})),"identifier"),E=A.tokenize(o.C.string("let "),"let"),_=A.tokenize(o.C.string("in "),"in"),z=A.tokenize(o.C.charLiteral(),"char"),V=A.tokenize(o.C.stringLiteral(),"string"),L=A.tokenize(o.N.integer(),"number"),I=A.tokenize(o.C.char("["),"lbracket"),W=A.tokenize(o.C.char("]"),"rbracket"),M=A.tokenize(o.C.char("\\"),"backslash"),q=A.tokenize(o.C.string("->"),"arrow"),H=A.tokenize(o.C.char("("),"lparen"),B=A.tokenize(o.C.char(")"),"rparen"),J=A.tokenize(o.C.char("="),"equal"),U=A.tokenize(o.C.char(","),"comma"),G=function(){return o.F.try(ie()).or(o.F.try(te())).or(o.F.try(R()))},R=function(){return o.F.try(oe($())).or(o.F.try(oe(ee()))).or(o.F.try(oe(re()))).or(o.F.try(oe(ne())))},D=function(){return o.F.try($()).or(o.F.try(ee())).or(o.F.try(re())).or(o.F.try(ne()))},K=function(e,t){for(var n=e.split(""),r=Y(t),i=new c("[]",{start:r.end-1,end:r.end}),o=n.length-1;o>=0;o--){var s={start:r.start+1+o,end:r.start+2+o};i=new u(new u(new c(":",s),new a(n[o],s),s),i,{start:r.start+1+o,end:r.end-1})}return i.pos.start=r.start,i.pos.end=r.end,i},Q=function(e){for(var t=e.first(),n=e.last(),r=e.at(1).map((function(e){return e.array()})).orElse([]),i={start:t,end:n},o=new c("[]",{start:i.end-1,end:i.end}),a=r.length-1;a>=0;a--)o=new u(new u(new c(":",r[a].pos),r[a],r[a].pos),o,{start:r[a].pos.start,end:i.end});return o.pos.start=i.start,o.pos.end=i.end,o},X=function(e){var t=e.first(),n=e.last(),r=e.at(1),o=se(i([new c(",".repeat(r.length-1),{start:t,end:t+1})],r));return o.pos.start=t,o.pos.end=n,o},Y=function(e){var t=e.getOffset()-1,n=e.input.location(t),r=e.input.location(t+1),i=e.input.source.input.source.slice(n,r);return{start:n,end:r-(i.length-i.trimEnd().length)}},Z=function(e,t){var n=t.input.source.input.source;return e.pos.end+=n.slice(e.pos.end).indexOf(")")+1,e.pos.start=n.slice(0,e.pos.start).lastIndexOf("("),e},$=function(){return o.F.try(L.map((function(e,t){return new s(e,Y(t))}))).or(o.F.try(V.map(K))).or(o.F.try(z.map((function(e,t){return new a(e,Y(t))})))).or(o.F.try(I.map((function(e,t){return t.location()-1})).then(o.F.lazy(G).then(U.drop().then(o.F.lazy(G)).optrep()).opt()).then(W.map((function(e,t){return Y(t).end}))).map(Q))).or(o.F.try(H.map((function(e,t){return t.location()-1})).then(o.F.lazy(G).then(U.drop().then(o.F.lazy(G)).rep()).array()).then(B.map((function(e,t){return Y(t).end}))).map(X))).or(o.F.try(P.map((function(e,t){return new c(e,Y(t))}))))},ee=function(){return H.drop().then(te()).then(B.drop()).single().map(Z)},te=function(){return M.map((function(e,t){return t.location()-1})).then(P).then(q.drop()).then(o.F.lazy(R)).map((function(e,t){return new l(e.at(1),e.at(2),{start:e.at(0),end:t.location()})}))},ne=function(){return H.drop().then(o.F.lazy(R)).then(B.drop()).single().map(Z)},re=function(){return H.drop().then(ie()).then(B.drop()).single().map(Z)},ie=function(){return E.map((function(e,t){return Y(t).start})).then(P).then(J.drop()).then(o.F.lazy(R)).then(_.drop()).then(o.F.lazy(R)).map((function(e,t){return new p(e.at(1),e.at(2),e.at(3),{start:e.at(0),end:t.location()})}))},oe=function(e){return e.then(ae()).array().map(se)},ae=function(){return o.F.lazy(D).optrep()},se=function(e){return e.reduce((function(e,t){return new u(e,t,{start:e.pos.start,end:t.pos.end})}))},ce=A.use(G().then(o.F.eos().drop()).single());t.parse=function(e,t){void 0===t&&(t=!1);var n=function(e){return"let"==e||e.endsWith(" let")?{accepted:!1,issuePosition:{start:e.length-3,end:e.length},message:"Failed to parse"}:"in"==e||e.endsWith(" in")?{accepted:!1,issuePosition:{start:e.length-2,end:e.length},message:"Failed to parse"}:void 0}(e);if(n){if(t)return n;throw new N("Failed to parse:\n\t"+e+"\n\t"+" ".repeat(n.issuePosition.start)+"^")}var r=ce.parse(o.Streams.ofString(e));if(t)return r.isAccepted()?{accepted:!0,value:r.value}:{accepted:!1,issuePosition:{start:r.location(),end:e.length},message:"Failed to parse"};if(r.isAccepted())return r.value;throw new N("Failed to parse:\n\t"+e+"\n\t"+" ".repeat(r.location())+"^")};var ue={number:b,char:y,boolean:j,f:m,list:g,tuple:w,maybe:v,either:O,a:x,b:T,c:k,d:F,pt:C,standardCtx:S};t.typeUtils=ue},20:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.infer=t.unify=t.combine=t.substitute=t.TypeInferenceError=void 0;var a=n(2),s=function(e){function t(t){var n=e.call(this,t)||this;return n.name="TypeInferenceError",n}return r(t,e),t}(Error);function c(e,t){var n=t,r={};for(var i in n)r[i]=m(n[i],e);return r}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return{};if(1===e.length)return e[0];if(e.length>2)return u(e[0],u.apply(void 0,e.slice(1)));var n=e[0],r=e[1],i={};for(var o in n)i[o]=m(n[o],r);for(var o in r)o in n||(i[o]=r[o]);return i}function l(e,t){var n;if(e instanceof a.TypeVar){if(g(t,e))throw new s("Contains/occurs check failed with "+JSON.stringify(e)+" and "+JSON.stringify(t));return(n={})[e.name]=t,n}if(t instanceof a.TypeVar)return l(t,e);if(e instanceof a.TypeFuncApp&&t instanceof a.TypeFuncApp){if(e.constructorName!==t.constructorName)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different constructors `"+e.constructorName+"` and `"+t.constructorName+"`");if(e.args.length!==t.args.length)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different argument list lengths `"+e.args.length+"` and `"+t.args.length+"`");for(var r={},i=0;i<e.args.length;i++)r=u(r,l(m(e.args[i],r),m(t.args[i],r)));return r}throw new Error("Internal error, this should never happen")}function p(e,t){var n=new Set(t);return e.filter((function(e){return!n.has(e)}))}function h(e){if(e instanceof a.PolyType)return p(h(e.monoType),e.quantifiedVars);if(e instanceof a.TypeVar)return[e.name];if(e instanceof a.TypeFuncApp)return e.args.map(h).reduce((function(e,t){return o(e,t)}),[]);if(e)return Object.values(e).map(h).reduce((function(e,t){return o(e,t)}),[]);throw new Error("Internal error, this should never happen")}function f(e,t){return new a.PolyType(function(e){var t=[];return new Set(e).forEach((function(e){return t.push(e)})),t}(p(h(t),h(e))),t)}t.TypeInferenceError=s,t.substitute=c,t.combine=u,t.unify=l,t.infer=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=a.typeUtils.standardCtx);var r=0,i=function(){return"t"+r++};if(!t)return y(e,n,i)[0];var o=[];try{return{accepted:!0,value:{type:y(e,n,i,(function(t,n){o.push({message:t,ast:d(e,n)})}))[0],steps:o}}}catch(c){return{accepted:!1,value:{steps:o},issuePosition:c.name==s.name?c.expr.pos:e.pos,message:c.message}}};var d=function e(t,n){if(t instanceof a.CharLiteral)return new a.CharLiteral(t.value,t.pos,n.get(t));if(t instanceof a.NumberLiteral)return new a.NumberLiteral(t.value,t.pos,n.get(t));if(t instanceof a.Var)return new a.Var(t.name,t.pos,n.get(t));if(t instanceof a.App)return new a.App(e(t.func,n),e(t.arg,n),t.pos,n.get(t));if(t instanceof a.Abs)return new a.Abs(t.param,e(t.body,n),t.pos,n.get(t));if(t instanceof a.Let)return new a.Let(t.param,e(t.def,n),e(t.body,n),t.pos,n.get(t));throw new Error("Internal error, this should never happen")},b=function(e){var t=new Map;return t.set(e,"highlight"),t};function y(e,t,n,r){var o,p,h,d;if(void 0===r&&(r=function(){}),e instanceof a.CharLiteral)return r("We know the primitive `"+e.toString()+"` is a `Char`",b(e)),[j(new a.PolyType([],new a.TypeFuncApp("Char")),n),{}];if(e instanceof a.NumberLiteral)return r("We know the primitive `"+e.toString()+"` is an `Int`",b(e)),[j(new a.PolyType([],new a.TypeFuncApp("Int")),n),{}];if(e instanceof a.Var){if(!(z=t[e.name])){r("We try to look up the variable `"+e.toString()+"` but find it is not in scope. We stop here as this is an error.",b(e));var g=new s("`"+e.name+"` is not in scope");throw g.expr=e,g}var w=j(z,n);return r("We can look up the variable `"+e.toString()+"` and find it has type `"+z.toString()+(z.quantifiedVars.length?"`\nWe instatiate this type with fresh type variables to get `"+w.toString()+"`":""),b(e)),[w,{}]}if(e instanceof a.App){var v=y(e.func,t,n,r),O=v[0],x=v[1],T=y(e.arg,c(x,t),n,r),k=T[0],F=T[1],C=new a.TypeVar(n()),S=O instanceof a.TypeFuncApp&&"->"==O.constructorName?"In function application, the function must accept the expected argument type.\nBefore unification, the function has type `"+O.toString()+"`\n\nTherefore we unify:\nFunction accepts `"+O.args[0].toString()+"`\nArgument has type `"+k.toString()+"`\n\n":"In function application, the function must accept the expected argument type and returns some other type.\n\nTherefore we unify:\nFunction type `"+O.toString()+"`\nArgument to fresh type `"+new a.TypeFuncApp("->",k,C).toString()+"`\n\n",N=void 0;try{N=l(m(O,F),new a.TypeFuncApp("->",k,C))}catch(g){throw r(S+"However, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+g.message,b(e)),g.expr=e,g}var A=m(C,N);return r(S+"This gives the substitution `"+(h=N,d=C.name,("{ "+Object.keys(h).filter((function(e){return e!==d})).map((function(e){return e+" \u21a6 "+h[e].toString()})).join(", ")+" }").replace("{  }","{}")+"`\nAnd the function's return type as `")+A.toString()+"`",b(e)),[A,u(x,F,N)]}if(e instanceof a.Abs){C=new a.TypeVar(n());r("Our function definition binds `"+e.param+"` in the body to the fresh type `"+C.toString()+"`",b(e));var P=y(e.body,i(i({},t),((o={})[e.param]=new a.PolyType([],C),o)),n,r),E=P[0],_=P[1],z=m(new a.TypeFuncApp("->",C,E),_);return r((_[C.name]?"We apply the substitution `{ "+C.name+" \u21a6 "+_[C.name].toString()+" }` to get the parameter's type `"+z.args[0].toString()+"`.\n":"")+"The return type is given by the function body's type `"+z.args[1].toString()+"`\nTherefore the overall type is `"+z.toString()+"`",b(e)),[z,_]}if(e instanceof a.Let){var V=y(e.def,t,n,r),L=V[0],I=V[1],W=f(c(I,t),L);r("Our let statement binds `"+e.param+"` in the body to the type `"+W.toString()+"`",b(e));var M=y(e.body,i(i({},c(I,t)),((p={})[e.param]=W,p)),n,r);E=M[0],_=M[1];return r("Our let statement then takes its body's type `"+E.toString()+"`",b(e)),[E,u(I,_)]}throw new Error("Internal error, this should never happen")}function j(e,t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),e instanceof a.TypeVar){var i=n.indexOf(e.name);return-1===i?e:new a.TypeVar(r[i])}if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return j(e,t,n,r)})))));if(e instanceof a.PolyType)return j(e.monoType,t,e.quantifiedVars,e.quantifiedVars.map(t));throw new Error("Internal error, this should never happen")}function m(e,t){if(e instanceof a.TypeVar)return e.name in t?t[e.name]:e;if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return m(e,t)})))));if(e instanceof a.PolyType)return new a.PolyType(e.quantifiedVars,m(e.monoType,t));throw new Error("Internal error, this should never happen")}function g(e,t){if(e instanceof a.TypeVar)return e.name==t.name;if(e instanceof a.TypeFuncApp)return e.args.some((function(e){return g(e,t)}));if(e instanceof a.PolyType)return g(e.monoType,t)&&!e.quantifiedVars.includes(t.name);throw new Error("Internal error, this should never happen")}t.apply=m},27:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),o=n.n(i),a=n(19),s=n.n(a),c=n(3),u=(n(27),n(21)),l=n(2),p=n(20);function h(e){var t=e.node,n=e.hoverCallback;if(t instanceof l.CharLiteral||t instanceof l.NumberLiteral)return Object(r.jsx)(f,{node:t,hoverCallback:n,children:t.value});if(t instanceof l.Var)return Object(r.jsx)(f,{node:t,hoverCallback:n,children:t.name});if(t instanceof l.App)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(f,{node:t,hoverCallback:n,children:Object(r.jsx)("span",{className:"sans-serif",children:"Function application"})}),Object(r.jsx)(d,{children:Object(r.jsx)(h,{node:t.func,hoverCallback:n})}),Object(r.jsx)(d,{children:Object(r.jsx)(h,{node:t.arg,hoverCallback:n})})]});if(t instanceof l.Abs)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(f,{node:t,hoverCallback:n,children:["\u03bb",t.param]}),Object(r.jsx)(d,{symbol:"->",children:Object(r.jsx)(h,{node:t.body,hoverCallback:n})})]});if(t instanceof l.Let)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(f,{node:t,hoverCallback:n,children:["let ",t.param]}),Object(r.jsx)(d,{symbol:"=",children:Object(r.jsx)(h,{node:t.def,hoverCallback:n})}),Object(r.jsx)(d,{symbol:"in",children:Object(r.jsx)(h,{node:t.body,hoverCallback:n})})]});throw new Error("Attempted to display a node of invalid type "+typeof t)}function f(e){var t=e.children,n=e.node,i=e.hoverCallback;return Object(r.jsx)("div",{className:"ast-node "+(n.notes||""),onMouseOver:function(){return i(!0,n.pos)},onMouseOut:function(){return i(!1,n.pos)},children:t})}function d(e){var t=e.children,n=e.symbol;return Object(r.jsx)("div",{className:"ast-child","data-symbol":n,children:t})}var b=function(e){var t=e.ast,n=e.hoverCallback;return Object(r.jsx)("div",{className:"ast-view",children:Object(r.jsx)(h,{node:t,hoverCallback:n})})};var y=function(e,t){return function(n,r){e(n?[].concat(Object(u.a)(t),[{start:r.start,end:r.end,className:"highlight-white"}]):t)}},j=function(e){var t=e.code,n=e.setHighlights,o=Object(i.useMemo)((function(){return Object(l.parse)(t,!0)}),[t]);Object(i.useEffect)((function(){return n(o.accepted?[]:[{start:o.issuePosition.start,end:o.issuePosition.end,className:"highlight-error"}])}),[o,n]);var a=Object(i.useMemo)((function(){if(o.accepted)return Object(p.infer)(o.value,!0)}),[o]);if(Object(i.useEffect)((function(){return a&&n(a.accepted?[]:[{start:a.issuePosition.start,end:a.issuePosition.end,className:"highlight-error"}])}),[a,n]),!o.accepted)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Parse error"}),Object(r.jsx)("p",{children:o.message})]});var s=y(n,a.accepted?[]:[{start:a.issuePosition.start,end:a.issuePosition.end,className:"highlight-error"}]);return 0===a.value.steps.length&&(r.Fragment,o.value),Object(r.jsxs)(r.Fragment,{children:[a.accepted?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Expression type"}),Object(r.jsx)("p",{children:Object(r.jsx)("code",{children:a.value.type.toString()})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Type error"}),Object(r.jsx)("p",{children:"The expression does not have valid type"})]}),Object(r.jsx)("h2",{children:"Type derivation"}),a.value.steps.map((function(e,t){return Object(r.jsxs)("div",{className:"type-derivation-step",children:[Object(r.jsxs)("h3",{children:["Step ",t+1]}),Object(r.jsx)("p",{children:e.message.split("`").map((function(e,t){return t%2===0?e:Object(r.jsx)("code",{children:e},t)}))}),Object(r.jsx)(b,{ast:e.ast,hoverCallback:s})]},t)}))]})};var m=function(){var e=Object(i.useState)("map not []"),t=Object(c.a)(e,2),n=t[0],o=t[1],a=Object(i.useState)([]),s=Object(c.a)(a,2),u=s[0],p=s[1],h=Object(i.useState)(!1),f=Object(c.a)(h,2),d=f[0],b=f[1];return document.getElementById("body")&&(document.getElementById("body").style.overflow=d?"hidden":""),Object(r.jsxs)("div",{id:"main",children:[d&&Object(r.jsx)("div",{className:"modal",onClick:function(e){"modal"===e.target.className&&b(!1)},children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsx)("button",{className:"sans-serif",onClick:function(){return b(!1)},children:"Close"}),Object(r.jsx)("h2",{children:"Language reference"}),Object(r.jsxs)("p",{children:["The language is similar in syntax to Haskell. All functions are applied in prefix notation, i.e. ",Object(r.jsx)("code",{children:"+ 3 4"})," instead of ",Object(r.jsx)("code",{children:"3 + 4"}),"."]}),Object(r.jsx)("p",{children:"The type constructors available are:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Int"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Char"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Bool"})}),Object(r.jsxs)("li",{children:[Object(r.jsxs)("code",{children:["-",">"]})," for functions"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("code",{children:"[]"})," for lists"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("code",{children:","}),", ",Object(r.jsx)("code",{children:",,"}),", ",Object(r.jsx)("code",{children:",,,"})," etc. for tuples"]}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Maybe"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Either"})})]}),Object(r.jsx)("p",{children:"The available set of built-in functions and their types are:"}),Object(r.jsx)("ul",{children:Object.entries(l.typeUtils.standardCtx).filter((function(e){return","!==Object(c.a)(e,1)[0][0]})).map((function(e){var t=Object(c.a)(e,2),n=t[0],i=t[1];return Object(r.jsx)("li",{children:Object(r.jsxs)("code",{children:[n," :: ",null===i||void 0===i?void 0:i.toString()]})},n)}))})]})}),Object(r.jsx)("h1",{children:"interactive type inference"}),Object(r.jsx)("h2",{children:"Play with algorithm W in your browser."}),Object(r.jsx)("p",{children:"Type inference is the ability to determine an expression's type in a language. Hindley-Milner (HM) is a typed \u03bb-calculus which allows for complete type inference without explicit type annotations. Haskell's type system is based on HM."}),Object(r.jsxs)("p",{children:["This tool allows you to enter expressions in syntax similar to Haskell and view how a type inference algorithm (algorithm W) could work out the types. A full list of built-in functions and their types is available ",Object(r.jsx)("button",{className:"sans-serif",onClick:function(){return b(!0)},children:"here"}),". Expressions must be given in prefix notation, i.e. ",Object(r.jsx)("button",{onClick:function(){return o("+ 3 4")},children:"+ 3 4"})," instead of ",Object(r.jsx)("button",{onClick:function(){return o("3 + 4")},children:"3 + 4"}),"."]}),Object(r.jsxs)("h2",{children:["Samples:",Object(r.jsx)("button",{onClick:function(){return o("4")},children:"4"}),Object(r.jsx)("button",{onClick:function(){return o("not")},children:"not"}),Object(r.jsx)("button",{onClick:function(){return o("odd 5")},children:"odd 5"}),Object(r.jsx)("button",{onClick:function(){return o("map not []")},children:"map not []"}),Object(r.jsx)("button",{onClick:function(){return o("fst")},children:"fst"}),Object(r.jsx)("br",{className:"md-only"}),Object(r.jsx)("button",{onClick:function(){return o("Just")},children:"Just"}),Object(r.jsx)("button",{onClick:function(){return o("let x = 3 in (+, x)")},children:"let x = 3 in (+, x)"}),Object(r.jsxs)("button",{onClick:function(){return o("\\x -> / x 2")},children:["\\x -",">"," / x 2"]}),Object(r.jsx)("button",{onClick:function(){return o(": 23 [1]")},children:": 23 [1]"})]}),Object(r.jsxs)("div",{className:"code-container",children:[Object(r.jsx)("input",{placeholder:"Enter code...",value:n,onChange:function(e){return o(e.target.value)}}),n&&u.map((function(e,t){return Object(r.jsxs)("p",{children:[n.slice(0,e.start),Object(r.jsx)("span",{className:e.className,children:n.slice(e.start,e.end)}),n.slice(e.end)]},t)}))]}),n&&Object(r.jsx)(j,{code:n,setHighlights:p})]})};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.b0399477.chunk.js.map