(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{2:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.typeUtils=t.ParseError=t.parse=t.PolyType=t.TypeFuncApp=t.TypeVar=t.Let=t.Abs=t.App=t.Var=t.NumberLiteral=t.CharLiteral=void 0;var a=n(28),o=function(){function e(e,t,n){this.value=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return"'"+this.value+"'"},e}();t.CharLiteral=o;var s=function(){function e(e,t,n){this.value=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return this.value.toString()},e}();t.NumberLiteral=s;var c=function(){function e(e,t,n){this.name=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return this.name},e}();t.Var=c;var u=function(){function e(e,t,n,r){this.func=e,this.arg=t,this.pos=n,this.notes=r}return e.prototype.toString=function(){return"("+this.func.toString()+" "+this.arg.toString()+")"},e}();t.App=u;var l=function(){function e(e,t,n,r){this.param=e,this.body=t,this.pos=n,this.notes=r}return e.prototype.toString=function(){return"(\\"+this.param+" -> "+this.body.toString()+")"},e}();t.Abs=l;var p=function(){function e(e,t,n,r,i){this.param=e,this.def=t,this.body=n,this.pos=r,this.notes=i}return e.prototype.toString=function(){return"(let "+this.param+" = "+this.def.toString()+" in "+this.body.toString()+")"},e}();t.Let=p;var h=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e}();t.TypeVar=h;var d=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.constructorName=e,this.args=t}return e.prototype.toString=function(){return"->"==this.constructorName?(this.args[0]instanceof e&&"->"==this.args[0].constructorName?"("+this.args[0].toString()+")":this.args[0].toString())+" -> "+this.args[1].toString():"[]"==this.constructorName?"["+this.args[0].toString()+"]":this.constructorName.startsWith(",")?"("+this.args.join(", ")+")":this.args.every((function(e){return e instanceof h||"Int"==e.constructorName||"Char"==e.constructorName||"Bool"==e.constructorName}))?this.constructorName+(this.args.length?" ":"")+this.args.map((function(e){return""+e.toString()})).join(" "):this.constructorName+(this.args.length?" ":"")+this.args.map((function(e){return"("+e.toString()+")"})).join(" ")},e}();t.TypeFuncApp=d;var f=function(){function e(e,t){this.quantifiedVars=e,this.monoType=t}return e.prototype.toString=function(){return(this.quantifiedVars.length?this.quantifiedVars.map((function(e){return"\u2200"+e})).join("")+": ":"")+this.monoType.toString()},e}();t.PolyType=f;var b=new d("Int"),y=new d("Char"),j=new d("Bool"),m=function e(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return 0===r.length?new d("->",t,n):new d("->",t,e.apply(void 0,i([n,r[0]],r.slice(1))))},g=function(e){return new d("[]",e)},v=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)throw new Error("Tuple has too few elements, minimum of 2 but given "+e.length);if(e.length>8)throw new Error("Tuple has too many elements, maximum of 8 but given "+e.length);return new(d.bind.apply(d,i([void 0,",".repeat(e.length-1)],e)))},w=function(e){return new d("Maybe",e)},O=function(e,t){return new d("Either",e,t)},x=new h("a"),T=new h("b"),C=new h("c"),S=new h("d"),F=function(e){return new f([],e)},k={"+":F(m(b,b,b)),"*":F(m(b,b,b)),"-":F(m(b,b,b)),"/":F(m(b,b,b)),"%":F(m(b,b,b)),negate:F(m(b,b)),abs:F(m(b,b)),signum:F(m(b,b)),even:F(m(b,j)),odd:F(m(b,j)),not:F(m(j,j)),"&&":F(m(j,j,j)),"||":F(m(j,j,j)),True:F(j),False:F(j),myNumber:F(b),myBoolean:F(j),"[]":new f(["a"],g(x)),":":new f(["a"],m(x,g(x),g(x))),cons:new f(["a"],m(x,g(x),g(x))),"++":new f(["a"],m(g(x),g(x),g(x))),head:new f(["a"],m(g(x),x)),last:new f(["a"],m(g(x),x)),tail:new f(["a"],m(g(x),g(x))),init:new f(["a"],m(g(x),g(x))),uncons:new f(["a"],m(g(x),w(v(x,g(x))))),null:new f(["a"],m(g(x),j)),length:new f(["a"],m(g(x),b)),map:new f(["a","b"],m(m(x,T),g(x),g(T))),reverse:new f(["a"],m(g(x),g(x))),intersperse:new f(["a"],m(x,g(x),g(x))),intercalate:new f(["a"],m(g(x),g(g(x)),g(x))),transpose:new f(["a"],m(g(g(x)),g(g(x)))),subsequences:new f(["a"],m(g(x),g(g(x)))),permutations:new f(["a"],m(g(x),g(g(x)))),foldl:new f(["a"],m(m(T,x,T),T,g(x),T)),"foldl'":new f(["a"],m(m(T,x,T),T,g(x),T)),foldl1:new f(["a"],m(m(x,x,x),g(x),x)),"foldl1'":new f(["a"],m(m(x,x,x),g(x),x)),foldr:new f(["a"],m(m(x,T,T),T,g(x),T)),foldr1:new f(["a"],m(m(x,x,x),g(x),x)),concat:new f(["a"],m(g(g(x)),g(x))),concatMap:new f(["a"],m(m(x,g(x)),g(x),g(T))),and:F(m(g(j),j)),or:F(m(g(j),j)),any:new f(["a"],m(m(x,j),g(x),j)),all:new f(["a"],m(m(x,j),g(x),j)),sum:F(m(g(b),b)),product:F(m(g(b),b)),maximum:F(m(g(b),b)),minimum:F(m(g(b),b)),take:new f(["a"],m(b,g(x),g(x))),drop:new f(["a"],m(b,g(x),g(x))),splitAt:new f(["a"],m(b,g(x),v(g(x),g(x)))),takeWhile:new f(["a"],m(m(x,j),g(x),g(x))),dropWhile:new f(["a"],m(m(x,j),g(x),g(x))),elem:new f(["a"],m(x,g(x),j)),notElem:new f(["a"],m(x,g(x),j)),lookup:new f(["a","b"],m(x,g(v(x,T)),w(T))),find:new f(["a"],m(m(x,j),g(x),w(x))),filter:new f(["a"],m(m(x,j),g(x),g(x))),partition:new f(["a"],m(m(x,j),g(x),v(g(x),g(x)))),"!!":new f(["a"],m(g(x),b,x)),zip:new f(["a","b"],m(g(x),g(T),g(v(x,T)))),zipWith:new f(["a","b","c"],m(m(x,T,C),g(x),g(T),g(C))),unzip:new f(["a","b"],m(g(v(x,T)),v(g(x),g(T)))),nub:new f(["a"],m(g(x),g(x))),delete:new f(["a"],m(x,g(x),g(x))),union:new f(["a"],m(g(x),g(x),g(x))),intersect:new f(["a"],m(g(x),g(x),g(x))),sort:new f(["a"],m(g(x),g(x))),",":new f(["a","b"],m(x,T,v(x,T))),",,":new f(["a","b","c"],m(x,T,C,v(x,T,C))),",,,":new f(["a","b","c","d"],m(x,T,C,S,v(x,T,C,S))),t:new f(["a","b"],m(x,T,v(x,T))),tt:new f(["a","b","c"],m(x,T,C,v(x,T,C))),ttt:new f(["a","b","c","d"],m(x,T,C,S,v(x,T,C,S))),fst:new f(["a","b"],m(v(x,T),x)),snd:new f(["a","b"],m(v(x,T),T)),curry:new f(["a","b","c"],m(m(v(x,T),C),x,T,C)),uncurry:new f(["a","b","c"],m(m(x,T,C),v(x,T),C)),Just:new f(["a"],m(x,w(x))),Nothing:new f(["a"],w(x)),Left:new f(["a","b"],m(x,O(x,T))),Right:new f(["a","b"],m(T,O(x,T))),id:new f(["a"],m(x,x))},A=function(e){function t(t){var n=e.call(this,t)||this;return n.name="ParseError",n}return r(t,e),t}(Error);t.ParseError=A;var N=new a.GenLex,P=N.tokenize(a.C.charIn("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789*+-/%<>^:_|&!'").rep().map((function(e){return e.join()})),"identifier"),E=N.tokenize(a.C.string("let "),"let"),_=N.tokenize(a.C.string("in "),"in"),z=N.tokenize(a.C.charLiteral(),"char"),V=N.tokenize(a.C.stringLiteral(),"string"),L=N.tokenize(a.N.integer(),"number"),I=N.tokenize(a.C.char("["),"lbracket"),W=N.tokenize(a.C.char("]"),"rbracket"),M=N.tokenize(a.C.char("\\"),"backslash"),q=N.tokenize(a.C.string("->"),"arrow"),H=N.tokenize(a.C.char("("),"lparen"),B=N.tokenize(a.C.char(")"),"rparen"),J=N.tokenize(a.C.char("="),"equal"),U=N.tokenize(a.C.char(","),"comma"),G=function(){return a.F.try(ie()).or(a.F.try(te())).or(a.F.try(R()))},R=function(){return a.F.try(ae($())).or(a.F.try(ae(ee()))).or(a.F.try(ae(re()))).or(a.F.try(ae(ne())))},D=function(){return a.F.try($()).or(a.F.try(ee())).or(a.F.try(re())).or(a.F.try(ne()))},K=function(e,t){for(var n=e.split(""),r=Y(t),i=new c("[]",{start:r.end-1,end:r.end}),a=n.length-1;a>=0;a--){var s={start:r.start+1+a,end:r.start+2+a};i=new u(new u(new c(":",s),new o(n[a],s),s),i,{start:r.start+1+a,end:r.end-1})}return i.pos.start=r.start,i.pos.end=r.end,i},Q=function(e){for(var t=e.first(),n=e.last(),r=e.at(1).map((function(e){return e.array()})).orElse([]),i={start:t,end:n},a=new c("[]",{start:i.end-1,end:i.end}),o=r.length-1;o>=0;o--)a=new u(new u(new c(":",r[o].pos),r[o],r[o].pos),a,{start:r[o].pos.start,end:i.end});return a.pos.start=i.start,a.pos.end=i.end,a},X=function(e){var t=e.first(),n=e.last(),r=e.at(1),a=se(i([new c(",".repeat(r.length-1),{start:t,end:t+1})],r));return a.pos.start=t,a.pos.end=n,a},Y=function(e){var t=e.getOffset()-1,n=e.input.location(t),r=e.input.location(t+1),i=e.input.source.input.source.slice(n,r);return{start:n,end:r-(i.length-i.trimEnd().length)}},Z=function(e,t){var n=t.input.source.input.source;return e.pos.end+=n.slice(e.pos.end).indexOf(")")+1,e.pos.start=n.slice(0,e.pos.start).lastIndexOf("("),e},$=function(){return a.F.try(L.map((function(e,t){return new s(e,Y(t))}))).or(a.F.try(V.map(K))).or(a.F.try(z.map((function(e,t){return new o(e,Y(t))})))).or(a.F.try(I.map((function(e,t){return t.location()-1})).then(a.F.lazy(G).then(U.drop().then(a.F.lazy(G)).optrep()).opt()).then(W.map((function(e,t){return Y(t).end}))).map(Q))).or(a.F.try(H.map((function(e,t){return t.location()-1})).then(a.F.lazy(G).then(U.drop().then(a.F.lazy(G)).rep()).array()).then(B.map((function(e,t){return Y(t).end}))).map(X))).or(a.F.try(P.map((function(e,t){return new c(e,Y(t))}))))},ee=function(){return H.drop().then(te()).then(B.drop()).single().map(Z)},te=function(){return M.map((function(e,t){return t.location()-1})).then(P).then(q.drop()).then(a.F.lazy(R)).map((function(e,t){return new l(e.at(1),e.at(2),{start:e.at(0),end:t.location()})}))},ne=function(){return H.drop().then(a.F.lazy(R)).then(B.drop()).single().map(Z)},re=function(){return H.drop().then(ie()).then(B.drop()).single().map(Z)},ie=function(){return E.map((function(e,t){return Y(t).start})).then(P).then(J.drop()).then(a.F.lazy(R)).then(_.drop()).then(a.F.lazy(R)).map((function(e,t){return new p(e.at(1),e.at(2),e.at(3),{start:e.at(0),end:t.location()})}))},ae=function(e){return e.then(oe()).array().map(se)},oe=function(){return a.F.lazy(D).optrep()},se=function(e){return e.reduce((function(e,t){return new u(e,t,{start:e.pos.start,end:t.pos.end})}))},ce=N.use(G().then(a.F.eos().drop()).single());t.parse=function(e,t){void 0===t&&(t=!1);var n=function(e){return"let"==e||e.endsWith(" let")?{accepted:!1,issuePosition:{start:e.length-3,end:e.length},message:"Failed to parse"}:"in"==e||e.endsWith(" in")?{accepted:!1,issuePosition:{start:e.length-2,end:e.length},message:"Failed to parse"}:void 0}(e);if(n){if(t)return n;throw new A("Failed to parse:\n\t"+e+"\n\t"+" ".repeat(n.issuePosition.start)+"^")}var r=ce.parse(a.Streams.ofString(e));if(t)return r.isAccepted()?{accepted:!0,value:r.value}:{accepted:!1,issuePosition:{start:r.location(),end:e.length},message:"Failed to parse"};if(r.isAccepted())return r.value;throw new A("Failed to parse:\n\t"+e+"\n\t"+" ".repeat(r.location())+"^")};var ue={number:b,char:y,boolean:j,f:m,list:g,tuple:v,maybe:w,either:O,a:x,b:T,c:C,d:S,pt:F,standardCtx:k};t.typeUtils=ue},20:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.infer=t.unify=t.combine=t.substitute=t.TypeInferenceError=void 0;var o=n(2),s=function(e){function t(t){var n=e.call(this,t)||this;return n.name="TypeInferenceError",n}return r(t,e),t}(Error);function c(e,t){var n=t,r={};for(var i in n)r[i]=m(n[i],e);return r}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return{};if(1===e.length)return e[0];if(e.length>2)return u(e[0],u.apply(void 0,e.slice(1)));var n=e[0],r=e[1],i={};for(var a in n)i[a]=m(n[a],r);for(var a in r)a in n||(i[a]=r[a]);return i}function l(e,t){var n;if(e instanceof o.TypeVar){if(g(t,e))throw new s("Occurs check failed. `"+e.toString()+"` occurs in `"+t.toString()+"` so unifying them would create an infinite type.");return(n={})[e.name]=t,n}if(t instanceof o.TypeVar)return l(t,e);if(e instanceof o.TypeFuncApp&&t instanceof o.TypeFuncApp){if(e.constructorName!==t.constructorName)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different constructors `"+e.constructorName+"` and `"+t.constructorName+"`");if(e.args.length!==t.args.length)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different argument list lengths `"+e.args.length+"` and `"+t.args.length+"`");for(var r={},i=0;i<e.args.length;i++)r=u(r,l(m(e.args[i],r),m(t.args[i],r)));return r}throw new Error("Internal error, this should never happen")}function p(e,t){var n=new Set(t);return e.filter((function(e){return!n.has(e)}))}function h(e){if(e instanceof o.PolyType)return p(h(e.monoType),e.quantifiedVars);if(e instanceof o.TypeVar)return[e.name];if(e instanceof o.TypeFuncApp)return e.args.map(h).reduce((function(e,t){return a(e,t)}),[]);if(e)return Object.values(e).map(h).reduce((function(e,t){return a(e,t)}),[]);throw new Error("Internal error, this should never happen")}function d(e,t){return new o.PolyType(function(e){var t=[];return new Set(e).forEach((function(e){return t.push(e)})),t}(p(h(t),h(e))),t)}t.TypeInferenceError=s,t.substitute=c,t.combine=u,t.unify=l,t.infer=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=o.typeUtils.standardCtx);var r=0,i=function(){return"t"+r++};if(!t)return y(e,n,i)[0];var a=[];try{return{accepted:!0,value:{type:y(e,n,i,(function(t,n){a.push({message:t,ast:f(e,n)})}))[0],steps:a}}}catch(c){return{accepted:!1,value:{steps:a},issuePosition:c.name==s.name?c.expr.pos:e.pos,message:c.message}}};var f=function e(t,n){if(t instanceof o.CharLiteral)return new o.CharLiteral(t.value,t.pos,n.get(t));if(t instanceof o.NumberLiteral)return new o.NumberLiteral(t.value,t.pos,n.get(t));if(t instanceof o.Var)return new o.Var(t.name,t.pos,n.get(t));if(t instanceof o.App)return new o.App(e(t.func,n),e(t.arg,n),t.pos,n.get(t));if(t instanceof o.Abs)return new o.Abs(t.param,e(t.body,n),t.pos,n.get(t));if(t instanceof o.Let)return new o.Let(t.param,e(t.def,n),e(t.body,n),t.pos,n.get(t));throw new Error("Internal error, this should never happen")},b=function(e){var t=new Map;return t.set(e,"highlight"),t};function y(e,t,n,r){var a,p,h,f;if(void 0===r&&(r=function(){}),e instanceof o.CharLiteral)return r("We know the primitive `"+e.toString()+"` is a `Char`",b(e)),[j(new o.PolyType([],new o.TypeFuncApp("Char")),n),{}];if(e instanceof o.NumberLiteral)return r("We know the primitive `"+e.toString()+"` is an `Int`",b(e)),[j(new o.PolyType([],new o.TypeFuncApp("Int")),n),{}];if(e instanceof o.Var){if(!(z=t[e.name])){r("We try to look up the variable `"+e.toString()+"` but find it is not in scope. We stop here as this is an error.",b(e));var g=new s("`"+e.name+"` is not in scope");throw g.expr=e,g}var v=j(z,n);return r("We can look up the variable `"+e.toString()+"` and find it has type `"+z.toString()+(z.quantifiedVars.length?"`\nWe instatiate this type with fresh type variables to get `"+v.toString()+"`":""),b(e)),[v,{}]}if(e instanceof o.App){var w=y(e.func,t,n,r),O=w[0],x=w[1],T=y(e.arg,c(x,t),n,r),C=T[0],S=T[1],F=new o.TypeVar(n()),k=O instanceof o.TypeFuncApp&&"->"==O.constructorName?"In function application, the function must accept the expected argument type.\nBefore unification, the function has type `"+O.toString()+"`\n\nTherefore we unify:\nFunction accepts `"+O.args[0].toString()+"`\nArgument has type `"+C.toString()+"`\n\n":"In function application, the function must accept the expected argument type and returns some other type.\n\nTherefore we unify:\nFunction type `"+O.toString()+"`\nArgument to fresh type `"+new o.TypeFuncApp("->",C,F).toString()+"`\n\n",A=void 0;try{A=l(m(O,S),new o.TypeFuncApp("->",C,F))}catch(g){throw r(k+"However, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+g.message,b(e)),g.expr=e,g}var N=m(F,A);return r(k+"This gives the substitution `"+(h=A,f=F.name,("{ "+Object.keys(h).filter((function(e){return e!==f})).map((function(e){return e+" \u21a6 "+h[e].toString()})).join(", ")+" }").replace("{  }","{}")+"`\nAnd the function's return type as `")+N.toString()+"`",b(e)),[N,u(x,S,A)]}if(e instanceof o.Abs){F=new o.TypeVar(n());r("Our function definition binds `"+e.param+"` in the body to the fresh type `"+F.toString()+"`",b(e));var P=y(e.body,i(i({},t),((a={})[e.param]=new o.PolyType([],F),a)),n,r),E=P[0],_=P[1],z=m(new o.TypeFuncApp("->",F,E),_);return r((_[F.name]?"We apply the substitution `{ "+F.name+" \u21a6 "+_[F.name].toString()+" }` to get the parameter's type `"+z.args[0].toString()+"`.\n":"")+"The return type is given by the function body's type `"+z.args[1].toString()+"`\nTherefore the overall type is `"+z.toString()+"`",b(e)),[z,_]}if(e instanceof o.Let){var V=y(e.def,t,n,r),L=V[0],I=V[1],W=d(c(I,t),L);r("Our let statement binds `"+e.param+"` in the body to the type `"+W.toString()+"`",b(e));var M=y(e.body,i(i({},c(I,t)),((p={})[e.param]=W,p)),n,r);E=M[0],_=M[1];return r("Our let statement then takes its body's type `"+E.toString()+"`",b(e)),[E,u(I,_)]}throw new Error("Internal error, this should never happen")}function j(e,t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),e instanceof o.TypeVar){var i=n.indexOf(e.name);return-1===i?e:new o.TypeVar(r[i])}if(e instanceof o.TypeFuncApp)return new(o.TypeFuncApp.bind.apply(o.TypeFuncApp,a([void 0,e.constructorName],e.args.map((function(e){return j(e,t,n,r)})))));if(e instanceof o.PolyType)return j(e.monoType,t,e.quantifiedVars,e.quantifiedVars.map(t));throw new Error("Internal error, this should never happen")}function m(e,t){if(e instanceof o.TypeVar)return e.name in t?t[e.name]:e;if(e instanceof o.TypeFuncApp)return new(o.TypeFuncApp.bind.apply(o.TypeFuncApp,a([void 0,e.constructorName],e.args.map((function(e){return m(e,t)})))));if(e instanceof o.PolyType)return new o.PolyType(e.quantifiedVars,m(e.monoType,t));throw new Error("Internal error, this should never happen")}function g(e,t){if(e instanceof o.TypeVar)return e.name==t.name;if(e instanceof o.TypeFuncApp)return e.args.some((function(e){return g(e,t)}));if(e instanceof o.PolyType)return g(e.monoType,t)&&!e.quantifiedVars.includes(t.name);throw new Error("Internal error, this should never happen")}t.apply=m},27:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),a=n.n(i),o=n(19),s=n.n(o),c={analytics:{enabled:!0,url:"https://5lpondcp9g.execute-api.eu-west-1.amazonaws.com/"}},u=c.analytics.enabled&&"1"!==navigator.doNotTrack,l=Math.random().toString(36).slice(2),p=u?function(e){fetch(c.analytics.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:"cs310",streamId:l,data:e})})}:function(){},h=function(e,t){var n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n&&clearTimeout(n),n=setTimeout((function(){n=void 0,e.apply(void 0,i)}),t)}}(p,1e3),d=p,f=n(3),b=(n(27),n(21)),y=n(2),j=n(20);function m(e){var t=e.node,n=e.hoverCallback;if(t instanceof y.CharLiteral||t instanceof y.NumberLiteral)return Object(r.jsx)(g,{node:t,hoverCallback:n,children:t.value});if(t instanceof y.Var)return Object(r.jsx)(g,{node:t,hoverCallback:n,children:t.name});if(t instanceof y.App)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{node:t,hoverCallback:n,children:Object(r.jsx)("span",{className:"sans-serif",children:"Function application"})}),Object(r.jsx)(v,{children:Object(r.jsx)(m,{node:t.func,hoverCallback:n})}),Object(r.jsx)(v,{children:Object(r.jsx)(m,{node:t.arg,hoverCallback:n})})]});if(t instanceof y.Abs)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(g,{node:t,hoverCallback:n,children:["\u03bb",t.param]}),Object(r.jsx)(v,{symbol:"->",children:Object(r.jsx)(m,{node:t.body,hoverCallback:n})})]});if(t instanceof y.Let)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(g,{node:t,hoverCallback:n,children:["let ",t.param]}),Object(r.jsx)(v,{symbol:"=",children:Object(r.jsx)(m,{node:t.def,hoverCallback:n})}),Object(r.jsx)(v,{symbol:"in",children:Object(r.jsx)(m,{node:t.body,hoverCallback:n})})]});throw new Error("Attempted to display a node of invalid type "+typeof t)}function g(e){var t=e.children,n=e.node,i=e.hoverCallback;return Object(r.jsx)("div",{className:"ast-node "+(n.notes||""),onMouseOver:function(){return i(!0,n.pos)},onMouseOut:function(){return i(!1,n.pos)},children:t})}function v(e){var t=e.children,n=e.symbol;return Object(r.jsx)("div",{className:"ast-child","data-symbol":n,children:t})}var w=function(e){var t=e.ast,n=e.hoverCallback;return Object(r.jsx)("div",{className:"ast-view",children:Object(r.jsx)(m,{node:t,hoverCallback:n})})};var O=function(e,t){return function(n,r){e(n?[].concat(Object(b.a)(t),[{start:r.start,end:r.end,className:"highlight-white"}]):t)}},x=function(e){var t=e.code,n=e.setHighlights,a=Object(y.parse)(t,!0);Object(i.useEffect)((function(){return n(a.accepted?[]:[{start:a.issuePosition.start,end:a.issuePosition.end,className:"highlight-error"}])}),[a,n]);var o=a.accepted?Object(j.infer)(a.value,!0):void 0;if(Object(i.useEffect)((function(){return o&&n(o.accepted?[]:[{start:o.issuePosition.start,end:o.issuePosition.end,className:"highlight-error"}])}),[o,n]),!a.accepted)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Parse error"}),Object(r.jsx)("p",{children:a.message})]});var s=O(n,o.accepted?[]:[{start:o.issuePosition.start,end:o.issuePosition.end,className:"highlight-error"}]);return 0===o.value.steps.length&&(r.Fragment,a.value),Object(r.jsxs)(r.Fragment,{children:[o.accepted?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Expression type"}),Object(r.jsx)("p",{children:Object(r.jsx)("code",{children:o.value.type.toString()})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Type error"}),Object(r.jsx)("p",{children:"The expression does not have a valid type"})]}),Object(r.jsx)("h2",{children:"Type derivation"}),o.value.steps.map((function(e,t){return Object(r.jsxs)("div",{className:"type-derivation-step",children:[Object(r.jsxs)("h3",{children:["Step ",t+1]}),Object(r.jsx)("p",{children:e.message.split("`").map((function(e,t){return t%2===0?e:Object(r.jsx)("code",{children:e},t)}))}),Object(r.jsx)(w,{ast:e.ast,hoverCallback:s})]},t)}))]})},T=document.getElementById("body")||{style:{overflow:""}};function C(e){var t=e.value,n=e.setCode;return Object(r.jsx)("button",{onClick:function(){n(t),d({name:"codeButtonSet",value:t})},children:t})}var S=function(){var e=Object(i.useState)("map not []"),t=Object(f.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)([]),s=Object(f.a)(o,2),c=s[0],u=s[1],l=Object(i.useState)(!1),p=Object(f.a)(l,2),b=p[0],j=p[1],m=function(){j(!1),d({name:"help",value:"hide"})};T.style.overflow=b?"hidden":"";var g=Object(i.useMemo)((function(){return n&&Object(r.jsx)(x,{code:n,setHighlights:u})}),[n]);return Object(r.jsxs)("div",{id:"main",children:[b&&Object(r.jsx)("div",{className:"modal",onClick:function(e){"modal"===e.target.className&&m()},children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsx)("button",{className:"sans-serif",onClick:function(){return m()},children:"Close"}),Object(r.jsx)("h2",{children:"Language reference"}),Object(r.jsxs)("p",{children:["The language is similar in syntax to Haskell. All functions are applied in prefix notation, i.e. ",Object(r.jsx)("code",{children:"+ 3 4"})," instead of ",Object(r.jsx)("code",{children:"3 + 4"}),"."]}),Object(r.jsx)("p",{children:"The type constructors available are:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Int"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Char"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Bool"})}),Object(r.jsxs)("li",{children:[Object(r.jsxs)("code",{children:["-",">"]})," for functions"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("code",{children:"[]"})," for lists"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("code",{children:","}),", ",Object(r.jsx)("code",{children:",,"}),", ",Object(r.jsx)("code",{children:",,,"})," etc. for tuples"]}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Maybe"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Either"})})]}),Object(r.jsx)("p",{children:"The available set of built-in functions and their types are:"}),Object(r.jsx)("ul",{children:Object.entries(y.typeUtils.standardCtx).filter((function(e){return","!==Object(f.a)(e,1)[0][0]})).map((function(e){var t=Object(f.a)(e,2),n=t[0],i=t[1];return Object(r.jsx)("li",{children:Object(r.jsxs)("code",{children:[n," :: ",null===i||void 0===i?void 0:i.toString()]})},n)}))})]})}),Object(r.jsx)("h1",{children:"interactive type inference"}),Object(r.jsx)("h2",{children:"Play with algorithm W in your browser."}),Object(r.jsx)("p",{children:"Type inference is the ability to determine an expression's type in a language. Hindley-Milner (HM) is a typed \u03bb-calculus which allows for complete type inference without explicit type annotations. Haskell's type system is based on HM."}),Object(r.jsxs)("p",{children:["This tool allows you to enter expressions in syntax similar to Haskell and view how a type inference algorithm (algorithm W) could work out the types. A full list of built-in functions and their types is available ",Object(r.jsx)("button",{className:"sans-serif",onClick:function(){return j(!0),void d({name:"help",value:"show"})},"data-testid":"help-open-button",children:"here"}),". Expressions must be given in prefix notation, i.e. ",Object(r.jsx)(C,{value:"+ 3 4",setCode:a})," instead of ",Object(r.jsx)(C,{value:"3 + 4",setCode:a}),"."]}),Object(r.jsxs)("h2",{children:["Samples:",Object(r.jsx)(C,{value:"4",setCode:a}),Object(r.jsx)(C,{value:"not",setCode:a}),Object(r.jsx)(C,{value:"odd 5",setCode:a}),Object(r.jsx)(C,{value:"map not []",setCode:a}),Object(r.jsx)(C,{value:"fst",setCode:a}),Object(r.jsx)("br",{className:"md-only"}),Object(r.jsx)(C,{value:"Just",setCode:a}),Object(r.jsx)(C,{value:"let x = 3 in (+, x)",setCode:a}),Object(r.jsx)(C,{value:"\\x -> / x 2",setCode:a}),Object(r.jsx)(C,{value:": 23 [1]",setCode:a})]}),Object(r.jsxs)("div",{className:"code-container",children:[Object(r.jsx)("input",{placeholder:"Enter code...",value:n,onChange:function(e){a(e.target.value),h({name:"codeChange",value:e.target.value})}}),n&&c.map((function(e,t){return Object(r.jsxs)("p",{children:[n.slice(0,e.start),Object(r.jsx)("span",{className:e.className,children:n.slice(e.start,e.end)}),n.slice(e.end)]},t)}))]}),g]})};d({name:"load"}),s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(S,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.067937fa.chunk.js.map