(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{2:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.typeUtils=t.ParseError=t.parse=t.PolyType=t.TypeFuncApp=t.TypeVar=t.Let=t.Abs=t.App=t.Var=t.NumberLiteral=t.CharLiteral=void 0;var o=n(30),a=function(){function e(e,t,n){this.value=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return"'"+this.value+"'"},e}();t.CharLiteral=a;var s=function(){function e(e,t,n){this.value=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return this.value.toString()},e}();t.NumberLiteral=s;var c=function(){function e(e,t,n){this.name=e,this.pos=t,this.notes=n}return e.prototype.toString=function(){return this.name},e}();t.Var=c;var u=function(){function e(e,t,n,r){this.func=e,this.arg=t,this.pos=n,this.notes=r}return e.prototype.toString=function(){return"("+this.func.toString()+" "+this.arg.toString()+")"},e}();t.App=u;var p=function(){function e(e,t,n,r){this.param=e,this.body=t,this.pos=n,this.notes=r}return e.prototype.toString=function(){return"(\\"+this.param+" -> "+this.body.toString()+")"},e}();t.Abs=p;var f=function(){function e(e,t,n,r,i){this.param=e,this.def=t,this.body=n,this.pos=r,this.notes=i}return e.prototype.toString=function(){return"(let "+this.param+" = "+this.def.toString()+" in "+this.body.toString()+")"},e}();t.Let=f;var h=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e}();t.TypeVar=h;var l=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.constructorName=e,this.args=t}return e.prototype.toString=function(){return"->"==this.constructorName?(this.args[0]instanceof e&&"->"==this.args[0].constructorName?"("+this.args[0].toString()+")":this.args[0].toString())+" -> "+this.args[1].toString():"[]"==this.constructorName?"["+this.args[0].toString()+"]":this.constructorName.startsWith(",")?"("+this.args.join(", ")+")":this.args.every((function(e){return e instanceof h||"Int"==e.constructorName||"Char"==e.constructorName||"Bool"==e.constructorName}))?this.constructorName+(this.args.length?" ":"")+this.args.map((function(e){return""+e.toString()})).join(" "):this.constructorName+(this.args.length?" ":"")+this.args.map((function(e){return"("+e.toString()+")"})).join(" ")},e}();t.TypeFuncApp=l;var d=function(){function e(e,t){this.quantifiedVars=e,this.monoType=t}return e.prototype.toString=function(){return(this.quantifiedVars.length?this.quantifiedVars.map((function(e){return"\u2200"+e})).join("")+": ":"")+this.monoType.toString()},e}();t.PolyType=d;var y=new l("Int"),g=new l("Char"),w=new l("Bool"),m=function e(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return 0===r.length?new l("->",t,n):new l("->",t,e.apply(void 0,i([n,r[0]],r.slice(1))))},b=function(e){return new l("[]",e)},v=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)throw new Error("Tuple has too few elements, minimum of 2 but given "+e.length);if(e.length>9)throw new Error("Tuple has too many elements, maximum of 9 but given "+e.length);return new(l.bind.apply(l,i([void 0,",".repeat(e.length-1)],e)))},j=function(e){return new l("Maybe",e)},O=function(e,t){return new l("Either",e,t)},T=new h("a"),x=new h("b"),S=new h("c"),A=new h("d"),F=function(e){return new d([],e)},k={"+":F(m(y,y,y)),"*":F(m(y,y,y)),"-":F(m(y,y,y)),"/":F(m(y,y,y)),"%":F(m(y,y,y)),negate:F(m(y,y)),abs:F(m(y,y)),signum:F(m(y,y)),even:F(m(y,w)),odd:F(m(y,w)),not:F(m(w,w)),"&&":F(m(w,w,w)),"||":F(m(w,w,w)),True:F(w),False:F(w),myNumber:F(y),myBoolean:F(w),"[]":new d(["a"],b(T)),":":new d(["a"],m(T,b(T),b(T))),cons:new d(["a"],m(T,b(T),b(T))),"++":new d(["a"],m(b(T),b(T),b(T))),head:new d(["a"],m(b(T),T)),last:new d(["a"],m(b(T),T)),tail:new d(["a"],m(b(T),b(T))),init:new d(["a"],m(b(T),b(T))),uncons:new d(["a"],m(b(T),j(v(T,b(T))))),null:new d(["a"],m(b(T),w)),length:new d(["a"],m(b(T),y)),map:new d(["a","b"],m(m(T,x),b(T),b(x))),reverse:new d(["a"],m(b(T),b(T))),intersperse:new d(["a"],m(T,b(T),b(T))),intercalate:new d(["a"],m(b(T),b(b(T)),b(T))),transpose:new d(["a"],m(b(b(T)),b(b(T)))),subsequences:new d(["a"],m(b(T),b(b(T)))),permutations:new d(["a"],m(b(T),b(b(T)))),foldl:new d(["a"],m(m(x,T,x),x,b(T),x)),"foldl'":new d(["a"],m(m(x,T,x),x,b(T),x)),foldl1:new d(["a"],m(m(T,T,T),b(T),T)),"foldl1'":new d(["a"],m(m(T,T,T),b(T),T)),foldr:new d(["a"],m(m(T,x,x),x,b(T),x)),foldr1:new d(["a"],m(m(T,T,T),b(T),T)),concat:new d(["a"],m(b(b(T)),b(T))),concatMap:new d(["a"],m(m(T,b(T)),b(T),b(x))),and:F(m(b(w),w)),or:F(m(b(w),w)),any:new d(["a"],m(m(T,w),b(T),w)),all:new d(["a"],m(m(T,w),b(T),w)),sum:F(m(b(y),y)),product:F(m(b(y),y)),maximum:F(m(b(y),y)),minimum:F(m(b(y),y)),take:new d(["a"],m(y,b(T),b(T))),drop:new d(["a"],m(y,b(T),b(T))),splitAt:new d(["a"],m(y,b(T),v(b(T),b(T)))),takeWhile:new d(["a"],m(m(T,w),b(T),b(T))),dropWhile:new d(["a"],m(m(T,w),b(T),b(T))),elem:new d(["a"],m(T,b(T),w)),notElem:new d(["a"],m(T,b(T),w)),lookup:new d(["a","b"],m(T,b(v(T,x)),j(x))),find:new d(["a"],m(m(T,w),b(T),j(T))),filter:new d(["a"],m(m(T,w),b(T),b(T))),partition:new d(["a"],m(m(T,w),b(T),v(b(T),b(T)))),"!!":new d(["a"],m(b(T),y,T)),zip:new d(["a","b"],m(b(T),b(x),b(v(T,x)))),zipWith:new d(["a","b","c"],m(m(T,x,S),b(T),b(x),b(S))),unzip:new d(["a","b"],m(b(v(T,x)),v(b(T),b(x)))),nub:new d(["a"],m(b(T),b(T))),delete:new d(["a"],m(T,b(T),b(T))),union:new d(["a"],m(b(T),b(T),b(T))),intersect:new d(["a"],m(b(T),b(T),b(T))),sort:new d(["a"],m(b(T),b(T))),",":new d(["a","b"],m(T,x,v(T,x))),",,":new d(["a","b","c"],m(T,x,S,v(T,x,S))),",,,":new d(["a","b","c","d"],m(T,x,S,A,v(T,x,S,A))),",,,,":new d(["a","b","c","d","e"],m(T,x,S,A,new h("e"),v(T,x,S,A,new h("e")))),",,,,,":new d(["a","b","c","d","e","f"],m(T,x,S,A,new h("e"),new h("f"),v(T,x,S,A,new h("e"),new h("f")))),",,,,,,":new d(["a","b","c","d","e","f","g"],m(T,x,S,A,new h("e"),new h("f"),new h("g"),v(T,x,S,A,new h("e"),new h("f"),new h("g")))),",,,,,,,":new d(["a","b","c","d","e","f","g","h"],m(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h"),v(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h")))),",,,,,,,,":new d(["a","b","c","d","e","f","g","h","i"],m(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h"),new h("i"),v(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h"),new h("i")))),t:new d(["a","b"],m(T,x,v(T,x))),tt:new d(["a","b","c"],m(T,x,S,v(T,x,S))),ttt:new d(["a","b","c","d"],m(T,x,S,A,v(T,x,S,A))),tttt:new d(["a","b","c","d","e"],m(T,x,S,A,new h("e"),v(T,x,S,A,new h("e")))),ttttt:new d(["a","b","c","d","e","f"],m(T,x,S,A,new h("e"),new h("f"),v(T,x,S,A,new h("e"),new h("f")))),tttttt:new d(["a","b","c","d","e","f","g"],m(T,x,S,A,new h("e"),new h("f"),new h("g"),v(T,x,S,A,new h("e"),new h("f"),new h("g")))),ttttttt:new d(["a","b","c","d","e","f","g","h"],m(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h"),v(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h")))),tttttttt:new d(["a","b","c","d","e","f","g","h","i"],m(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h"),new h("i"),v(T,x,S,A,new h("e"),new h("f"),new h("g"),new h("h"),new h("i")))),fst:new d(["a","b"],m(v(T,x),T)),snd:new d(["a","b"],m(v(T,x),x)),curry:new d(["a","b","c"],m(m(v(T,x),S),T,x,S)),uncurry:new d(["a","b","c"],m(m(T,x,S),v(T,x),S)),Just:new d(["a"],m(T,j(T))),Nothing:new d(["a"],j(T)),Left:new d(["a","b"],m(T,O(T,x))),Right:new d(["a","b"],m(x,O(T,x))),id:new d(["a"],m(T,T))},C=function(e){function t(t){var n=e.call(this,t)||this;return n.name="ParseError",n}return r(t,e),t}(Error);t.ParseError=C;var V=new o.GenLex,N=V.tokenize(o.C.charIn("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789*+-/%<>^:_|&!'").rep().map((function(e){return e.join()})),"identifier"),P=V.tokenize(o.C.string("let "),"let"),_=V.tokenize(o.C.string("in "),"in"),E=V.tokenize(o.C.charLiteral(),"char"),I=V.tokenize(o.C.stringLiteral(),"string"),W=V.tokenize(o.N.integer(),"number"),L=V.tokenize(o.C.char("["),"lbracket"),z=V.tokenize(o.C.char("]"),"rbracket"),M=V.tokenize(o.C.char("\\"),"backslash"),q=V.tokenize(o.C.string("->"),"arrow"),H=V.tokenize(o.C.char("("),"lparen"),B=V.tokenize(o.C.char(")"),"rparen"),U=V.tokenize(o.C.char("="),"equal"),J=V.tokenize(o.C.char(","),"comma"),G=function(){return o.F.try(ie()).or(o.F.try(te())).or(o.F.try(R()))},R=function(){return o.F.try(oe($())).or(o.F.try(oe(ee()))).or(o.F.try(oe(re()))).or(o.F.try(oe(ne())))},D=function(){return o.F.try($()).or(o.F.try(ee())).or(o.F.try(re())).or(o.F.try(ne()))},K=function(e,t){for(var n=e.split(""),r=Y(t),i=new c("[]",{start:r.end-1,end:r.end}),o=n.length-1;o>=0;o--){var s={start:r.start+1+o,end:r.start+2+o};i=new u(new u(new c(":",s),new a(n[o],s),s),i,{start:r.start+1+o,end:r.end-1})}return i.pos.start=r.start,i.pos.end=r.end,i},Q=function(e){for(var t=e.first(),n=e.last(),r=e.at(1).map((function(e){return e.array()})).orElse([]),i={start:t,end:n},o=new c("[]",{start:i.end-1,end:i.end}),a=r.length-1;a>=0;a--)o=new u(new u(new c(":",r[a].pos),r[a],r[a].pos),o,{start:r[a].pos.start,end:i.end});return o.pos.start=i.start,o.pos.end=i.end,o},X=function(e){var t=e.first(),n=e.last(),r=e.at(1),o=se(i([new c(",".repeat(r.length-1),{start:t,end:t+1})],r));return o.pos.start=t,o.pos.end=n,o},Y=function(e){var t=e.getOffset()-1,n=e.input.location(t),r=e.input.location(t+1),i=e.input.source.input.source.slice(n,r);return{start:n,end:r-(i.length-i.trimEnd().length)}},Z=function(e,t){var n=t.input.source.input.source;return e.pos.end+=n.slice(e.pos.end).indexOf(")")+1,e.pos.start=n.slice(0,e.pos.start).lastIndexOf("("),e},$=function(){return o.F.try(W.map((function(e,t){return new s(e,Y(t))}))).or(o.F.try(I.map(K))).or(o.F.try(E.map((function(e,t){return new a(e,Y(t))})))).or(o.F.try(L.map((function(e,t){return t.location()-1})).then(o.F.lazy(G).then(J.drop().then(o.F.lazy(G)).optrep()).opt()).then(z.map((function(e,t){return Y(t).end}))).map(Q))).or(o.F.try(H.map((function(e,t){return t.location()-1})).then(o.F.lazy(G).then(J.drop().then(o.F.lazy(G)).rep()).array()).then(B.map((function(e,t){return Y(t).end}))).map(X))).or(o.F.try(N.map((function(e,t){return new c(e,Y(t))}))))},ee=function(){return H.drop().then(te()).then(B.drop()).single().map(Z)},te=function(){return M.map((function(e,t){return t.location()-1})).then(N).then(q.drop()).then(o.F.lazy(G)).map((function(e,t){return new p(e.at(1),e.at(2),{start:e.at(0),end:t.location()})}))},ne=function(){return H.drop().then(o.F.lazy(R)).then(B.drop()).single().map(Z)},re=function(){return H.drop().then(ie()).then(B.drop()).single().map(Z)},ie=function(){return P.map((function(e,t){return Y(t).start})).then(N).then(U.drop()).then(o.F.lazy(R)).then(_.drop()).then(o.F.lazy(R)).map((function(e,t){return new f(e.at(1),e.at(2),e.at(3),{start:e.at(0),end:t.location()})}))},oe=function(e){return e.then(ae()).array().map(se)},ae=function(){return o.F.lazy(D).optrep()},se=function(e){return e.reduce((function(e,t){return new u(e,t,{start:e.pos.start,end:t.pos.end})}))},ce=V.use(G().then(o.F.eos().drop()).single());t.parse=function(e,t){void 0===t&&(t=!1);var n=function(e){return"let"==e||e.endsWith(" let")?{accepted:!1,issuePosition:{start:e.length-3,end:e.length},message:"Failed to parse"}:"in"==e||e.endsWith(" in")?{accepted:!1,issuePosition:{start:e.length-2,end:e.length},message:"Failed to parse"}:void 0}(e);if(n){if(t)return n;throw new C("Failed to parse:\n\t"+e+"\n\t"+" ".repeat(n.issuePosition.start)+"^")}var r=ce.parse(o.Streams.ofString(e));if(t)return r.isAccepted()?{accepted:!0,value:r.value}:{accepted:!1,issuePosition:{start:r.location(),end:e.length},message:"Failed to parse"};if(r.isAccepted())return r.value;throw new C("Failed to parse:\n\t"+e+"\n\t"+" ".repeat(r.location())+"^")};var ue={number:y,char:g,boolean:w,f:m,list:b,tuple:v,maybe:j,either:O,a:T,b:x,c:S,d:A,pt:F,standardCtx:k};t.typeUtils=ue},20:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.infer=t.unify=t.combine=t.substitute=t.TypeInferenceError=void 0;var a=n(2),s=function(e){function t(t,n){var r=e.call(this,t)||this;return r.name="TypeInferenceError",r.expr=n,r}return r(t,e),t}(Error);function c(e,t){var n=t,r={};for(var i in n)r[i]=m(n[i],e);return r}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return{};if(1===e.length)return e[0];if(e.length>2)return u(e[0],u.apply(void 0,e.slice(1)));var n=e[0],r=e[1],i={};for(var o in n)i[o]=m(n[o],r);for(var o in r)o in n||(i[o]=r[o]);return i}function p(e,t){var n;if(e instanceof a.TypeVar){if(t instanceof a.TypeVar&&e.name==t.name)return{};if(b(t,e))throw new s("Occurs check failed. `"+e.toString()+"` occurs in `"+t.toString()+"` so unifying them would create an infinite type.");return(n={})[e.name]=t,n}if(t instanceof a.TypeVar)return p(t,e);if(e instanceof a.TypeFuncApp&&t instanceof a.TypeFuncApp){if(e.constructorName!==t.constructorName)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different constructors `"+e.constructorName+"` and `"+t.constructorName+"`");if(e.args.length!==t.args.length)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different argument list lengths `"+e.args.length+"` and `"+t.args.length+"`");for(var r={},i=0;i<e.args.length;i++)r=u(r,p(m(e.args[i],r),m(t.args[i],r)));return r}throw new Error("Internal error, this should never happen")}function f(e,t){var n=new Set(t);return e.filter((function(e){return!n.has(e)}))}function h(e){if(e instanceof a.PolyType)return f(h(e.monoType),e.quantifiedVars);if(e instanceof a.TypeVar)return[e.name];if(e instanceof a.TypeFuncApp)return e.args.map(h).reduce((function(e,t){return o(e,t)}),[]);if(e)return Object.values(e).map(h).reduce((function(e,t){return o(e,t)}),[]);throw new Error("Internal error, this should never happen")}function l(e,t){return new a.PolyType(function(e){var t=[];return new Set(e).forEach((function(e){return t.push(e)})),t}(f(h(t),h(e))),t)}t.TypeInferenceError=s,t.substitute=c,t.combine=u,t.unify=p,t.infer=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=a.typeUtils.standardCtx);var r=0,i=function(){return"t"+r++};if(!t)return g(e,n,i)[0];var o=[];try{return{accepted:!0,value:{type:g(e,n,i,(function(t,n){o.push({message:t,ast:d(e,n)})}))[0],steps:o}}}catch(c){return{accepted:!1,value:{steps:o},issuePosition:c.name==s.name&&c.expr?c.expr.pos:e.pos,message:c.message}}};var d=function e(t,n){if(t instanceof a.CharLiteral)return new a.CharLiteral(t.value,t.pos,n.get(t));if(t instanceof a.NumberLiteral)return new a.NumberLiteral(t.value,t.pos,n.get(t));if(t instanceof a.Var)return new a.Var(t.name,t.pos,n.get(t));if(t instanceof a.App)return new a.App(e(t.func,n),e(t.arg,n),t.pos,n.get(t));if(t instanceof a.Abs)return new a.Abs(t.param,e(t.body,n),t.pos,n.get(t));if(t instanceof a.Let)return new a.Let(t.param,e(t.def,n),e(t.body,n),t.pos,n.get(t));throw new Error("Internal error, this should never happen")},y=function(e){var t=new Map;return t.set(e,"highlight"),t};function g(e,t,n,r){var o,f,h,d;if(void 0===r&&(r=function(){}),e instanceof a.CharLiteral)return r("We know the primitive `"+e.toString()+"` is a `Char`",y(e)),[w(new a.PolyType([],new a.TypeFuncApp("Char")),n),{}];if(e instanceof a.NumberLiteral)return r("We know the primitive `"+e.toString()+"` is an `Int`",y(e)),[w(new a.PolyType([],new a.TypeFuncApp("Int")),n),{}];if(e instanceof a.Var){var b;if(!(E=t[e.name]))throw r("We try to look up the variable `"+e.toString()+"` but find it is not in scope. We stop here as this is an error.",y(e)),new s("`"+e.name+"` is not in scope",e);var v=w(E,n);return r("We can look up the variable `"+e.toString()+"` and find it has type `"+E.toString()+"`"+(E.quantifiedVars.length?"\nWe instatiate this type with fresh type variables to get `"+v.toString()+"`":""),y(e)),[v,{}]}if(e instanceof a.App){var j=g(e.func,t,n,r),O=j[0],T=j[1],x=g(e.arg,c(T,t),n,r),S=x[0],A=x[1],F=new a.TypeVar(n()),k=O instanceof a.TypeFuncApp&&"->"==O.constructorName?"In function application, the function must accept the expected argument type.\nBefore unification, the function has type `"+O.toString()+"`\n\nTherefore we unify:\nFunction accepts `"+O.args[0].toString()+"`\nArgument has type `"+S.toString()+"`\n\n":"In function application, the function must accept the expected argument type and returns some other type.\n\nTherefore we unify:\nFunction type `"+O.toString()+"`\nArgument to fresh type `"+new a.TypeFuncApp("->",S,F).toString()+"`\n\n",C=void 0;try{C=p(m(O,A),new a.TypeFuncApp("->",S,F))}catch(b){throw r(k+"However, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+b.message,y(e)),b.expr=e,b}var V=m(F,C);return r(k+"This gives the substitution `"+(h=C,d=F.name,("{ "+Object.keys(h).filter((function(e){return e!==d})).map((function(e){return e+" \u21a6 "+h[e].toString()})).join(", ")+" }").replace("{  }","{}")+"`\nAnd the function's return type as `")+V.toString()+"`",y(e)),[V,u(T,A,C)]}if(e instanceof a.Abs){F=new a.TypeVar(n());r("Our function definition binds `"+e.param+"` in the body to the fresh type `"+F.toString()+"`",y(e));var N=g(e.body,i(i({},t),((o={})[e.param]=new a.PolyType([],F),o)),n,r),P=N[0],_=N[1],E=m(new a.TypeFuncApp("->",F,P),_);return r((_[F.name]?"We apply the substitution `{ "+F.name+" \u21a6 "+_[F.name].toString()+" }` to get the parameter's type `"+E.args[0].toString()+"`.\n":"")+"The return type is given by the function body's type `"+E.args[1].toString()+"`\nTherefore the overall type is `"+E.toString()+"`",y(e)),[E,_]}if(e instanceof a.Let){var I=g(e.def,t,n,r),W=I[0],L=I[1],z=l(c(L,t),W);r("Our let statement binds `"+e.param+"` in the body to the type `"+z.toString()+"`",y(e));var M=g(e.body,i(i({},c(L,t)),((f={})[e.param]=z,f)),n,r);P=M[0],_=M[1];return r("Our let statement then takes its body's type `"+P.toString()+"`",y(e)),[P,u(L,_)]}throw new Error("Internal error, this should never happen")}function w(e,t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),e instanceof a.TypeVar){var i=n.indexOf(e.name);return-1===i?e:new a.TypeVar(r[i])}if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return w(e,t,n,r)})))));if(e instanceof a.PolyType)return w(e.monoType,t,e.quantifiedVars,e.quantifiedVars.map(t));throw new Error("Internal error, this should never happen")}function m(e,t){if(e instanceof a.TypeVar)return e.name in t?t[e.name]:e;if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return m(e,t)})))));if(e instanceof a.PolyType)return new a.PolyType(e.quantifiedVars,m(e.monoType,t));throw new Error("Internal error, this should never happen")}function b(e,t){if(e instanceof a.TypeVar)return e.name==t.name;if(e instanceof a.TypeFuncApp)return e.args.some((function(e){return b(e,t)}));if(e instanceof a.PolyType)return b(e.monoType,t)&&!e.quantifiedVars.includes(t.name);throw new Error("Internal error, this should never happen")}t.apply=m},21:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.infer=t.unifySubtitutions=t.unify=t.combine=t.substitute=t.TypeInferenceError=void 0;var a=n(2),s=function(e){function t(t,n){var r=e.call(this,t)||this;return r.name="TypeInferenceError",r.expr=n,r}return r(t,e),t}(Error);function c(e,t){var n=t,r={};for(var i in n)r[i]=v(n[i],e);return r}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return{};if(1===e.length)return e[0];if(e.length>2)return u(e[0],u.apply(void 0,e.slice(1)));var n=e[0],r=e[1],i={};for(var o in n)i[o]=v(n[o],r);for(var o in r)o in n||(i[o]=r[o]);return i}function p(e,t){var n;if(e instanceof a.TypeVar){if(t instanceof a.TypeVar&&e.name==t.name)return{};if(j(t,e))throw new s("Occurs check failed. `"+e.toString()+"` occurs in `"+t.toString()+"` so unifying them would create an infinite type.");return(n={})[e.name]=t,n}if(t instanceof a.TypeVar)return p(t,e);if(e instanceof a.TypeFuncApp&&t instanceof a.TypeFuncApp){if(e.constructorName!==t.constructorName)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different constructors `"+e.constructorName+"` and `"+t.constructorName+"`");if(e.args.length!==t.args.length)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different argument list lengths `"+e.args.length+"` and `"+t.args.length+"`");for(var r={},i=0;i<e.args.length;i++)r=u(r,p(v(e.args[i],r),v(t.args[i],r)));return r}throw new Error("Internal error, this should never happen")}function f(e,t){for(var n=Object.keys(e).filter((function(e){return e in t})),r=Object.entries(e).filter((function(e){var n=e[0];e[1];return!(n in t)})),i=Object.entries(t).filter((function(t){var n=t[0];t[1];return!(n in e)})),o=r.reduce((function(e,t){return e[t[0]]=t[1],e}),{}),c=0;c<i.length;c++){var f=[i[c][0],i[c][1]],h=f[0],d=v(f[1],o);if(l(d).includes(h))throw new s("Occurs check failed. `"+h.toString()+"` occurs in `"+d.toString()+"` so unifying them would create an infinite type.");o[h]=d}var y=o;for(c=0;c<n.length;c++){var g=new a.TypeVar(n[c]),w=v(v(g,e),y),m=v(v(g,t),y);if(l(w).includes(n[c]))throw new s("Occurs check failed. `"+n[c].toString()+"` occurs in `"+w.toString()+"` so unifying them would create an infinite type.");if(l(m).includes(n[c]))throw new s("Occurs check failed. `"+n[c].toString()+"` occurs in `"+m.toString()+"` so unifying them would create an infinite type.");y=u(y,p(w,m))}return y}function h(e,t){var n=new Set(t);return e.filter((function(e){return!n.has(e)}))}function l(e){if(e instanceof a.PolyType)return h(l(e.monoType),e.quantifiedVars);if(e instanceof a.TypeVar)return[e.name];if(e instanceof a.TypeFuncApp)return e.args.map(l).reduce((function(e,t){return o(e,t)}),[]);if(e)return Object.values(e).map(l).reduce((function(e,t){return o(e,t)}),[]);throw new Error("Internal error, this should never happen")}function d(e,t){return new a.PolyType(function(e){var t=[];return new Set(e).forEach((function(e){return t.push(e)})),t}(h(l(t),l(e))),t)}t.TypeInferenceError=s,t.substitute=c,t.combine=u,t.unify=p,t.unifySubtitutions=f,t.infer=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=a.typeUtils.standardCtx);var r=0,i=function(){return"t"+r++};if(!t)return m(e,n,i)[0];var o=[];try{return{accepted:!0,value:{type:m(e,n,i,(function(t,n){o.push({message:t,ast:y(e,n)})}))[0],steps:o}}}catch(c){return{accepted:!1,value:{steps:o},issuePosition:c.name==s.name&&c.expr?c.expr.pos:e.pos,message:c.message}}};var y=function e(t,n){if(t instanceof a.CharLiteral)return new a.CharLiteral(t.value,t.pos,n.get(t));if(t instanceof a.NumberLiteral)return new a.NumberLiteral(t.value,t.pos,n.get(t));if(t instanceof a.Var)return new a.Var(t.name,t.pos,n.get(t));if(t instanceof a.App)return new a.App(e(t.func,n),e(t.arg,n),t.pos,n.get(t));if(t instanceof a.Abs)return new a.Abs(t.param,e(t.body,n),t.pos,n.get(t));if(t instanceof a.Let)return new a.Let(t.param,e(t.def,n),e(t.body,n),t.pos,n.get(t));throw new Error("Internal error, this should never happen")},g=function(e){var t=new Map;return t.set(e,"highlight"),t},w=function(e,t){return("{ "+Object.keys(e).filter((function(e){return e!==t})).map((function(t){return t+" \u21a6 "+e[t].toString()})).join(", ")+" }").replace("{  }","{}")};function m(e,t,n,r){var o,h;if(void 0===r&&(r=function(){}),e instanceof a.CharLiteral)return r("We know the primitive `"+e.toString()+"` is a `Char`",g(e)),[b(new a.PolyType([],new a.TypeFuncApp("Char")),n),{}];if(e instanceof a.NumberLiteral)return r("We know the primitive `"+e.toString()+"` is an `Int`",g(e)),[b(new a.PolyType([],new a.TypeFuncApp("Int")),n),{}];if(e instanceof a.Var){var l;if(!(z=t[e.name]))throw r("We try to look up the variable `"+e.toString()+"` but find it is not in scope. We stop here as this is an error.",g(e)),new s("`"+e.name+"` is not in scope",e);var y=b(z,n);return r("We can look up the variable `"+e.toString()+"` and find it has type `"+z.toString()+"`"+(z.quantifiedVars.length?"\nWe instatiate this type with fresh type variables to get `"+y.toString()+"`":""),g(e)),[y,{}]}if(e instanceof a.App){var j=m(e.func,t,n,r),O=j[0],T=j[1],x=m(e.arg,t,n,r),S=x[0],A=x[1],F=new a.TypeVar(n()),k="We first determine the function and argument type separately as `"+O.toString()+"` and `"+S.toString()+"` respectively.\nFor these we have substitutions `"+w(T)+"` and `"+w(A)+"` to unify.\n\n",C=void 0;try{C=f(T,A)}catch(l){throw r(k+"However, these two subsitutions cannot be unified. We stop here as this is an error.\n\nMore details:\n"+l.message,g(e)),l.expr=e,l}var V=v(O,C),N=v(S,C),P=k+"These can be unified as `"+w(C)+"`\n\n"+(O instanceof a.TypeFuncApp&&"->"==O.constructorName?"The function must accept the expected argument type.\nThe function type after applying the unified substitution is `"+V.toString()+"`\n\nTherefore we unify:\nFunction accepts `"+V.args[0].toString()+"`\nArgument has type `"+N.toString()+"`\n\n":"The function must accept the expected argument type.\n\nTherefore we unify:\nFunction type `"+V.toString()+"`\nArgument to fresh type `"+new a.TypeFuncApp("->",N,F).toString()+"`\n\n"),_=void 0;try{_=p(V,new a.TypeFuncApp("->",N,F))}catch(l){throw r(P+"However, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+l.message,g(e)),l.expr=e,l}var E=v(F,_);return r(P+"This gives the final substitution `"+w(_,F.name)+"`\nAnd the function's return type as `"+E.toString()+"`",g(e)),[E,u(T,C,_)]}if(e instanceof a.Abs){F=new a.TypeVar(n());r("Our function definition binds `"+e.param+"` in the body to the fresh type `"+F.toString()+"`",g(e));var I=m(e.body,i(i({},t),((o={})[e.param]=new a.PolyType([],F),o)),n,r),W=I[0],L=I[1],z=v(new a.TypeFuncApp("->",F,W),L);return r((L[F.name]?"We apply the substitution `{ "+F.name+" \u21a6 "+L[F.name].toString()+" }` to get the parameter's type `"+z.args[0].toString()+"`.\n":"")+"The return type is given by the function body's type `"+z.args[1].toString()+"`\nTherefore the overall type is `"+z.toString()+"`",g(e)),[z,L]}if(e instanceof a.Let){var M=m(e.def,t,n,r),q=M[0],H=M[1],B=d(c(H,t),q);r("Our let statement binds `"+e.param+"` in the body to the type `"+B.toString()+"`",g(e));var U=m(e.body,i(i({},c(H,t)),((h={})[e.param]=B,h)),n,r);W=U[0],L=U[1];return r("Our let statement then takes its body's type `"+W.toString()+"`",g(e)),[W,u(H,L)]}throw new Error("Internal error, this should never happen")}function b(e,t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),e instanceof a.TypeVar){var i=n.indexOf(e.name);return-1===i?e:new a.TypeVar(r[i])}if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return b(e,t,n,r)})))));if(e instanceof a.PolyType)return b(e.monoType,t,e.quantifiedVars,e.quantifiedVars.map(t));throw new Error("Internal error, this should never happen")}function v(e,t){if(e instanceof a.TypeVar)return e.name in t?t[e.name]:e;if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return v(e,t)})))));if(e instanceof a.PolyType)return new a.PolyType(e.quantifiedVars,v(e.monoType,t));throw new Error("Internal error, this should never happen")}function j(e,t){if(e instanceof a.TypeVar)return e.name==t.name;if(e instanceof a.TypeFuncApp)return e.args.some((function(e){return j(e,t)}));if(e instanceof a.PolyType)return j(e.monoType,t)&&!e.quantifiedVars.includes(t.name);throw new Error("Internal error, this should never happen")}t.apply=v},22:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.infer=t.unify=t.combine=t.substitute=t.TypeInferenceError=void 0;var a=n(2),s=function(e){function t(t,n){var r=e.call(this,t)||this;return r.name="TypeInferenceError",r.expr=n,r}return r(t,e),t}(Error);function c(e,t){var n=t,r={};for(var i in n)r[i]=b(n[i],e);return r}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return{};if(1===e.length)return e[0];if(e.length>2)return u(e[0],u.apply(void 0,e.slice(1)));var n=e[0],r=e[1],i={};for(var o in n)i[o]=b(n[o],r);for(var o in r)o in n||(i[o]=r[o]);return i}function p(e,t){var n;if(e instanceof a.TypeVar){if(t instanceof a.TypeVar&&e.name==t.name)return{};if(v(t,e))throw new s("Occurs check failed. `"+e.toString()+"` occurs in `"+t.toString()+"` so unifying them would create an infinite type.");return(n={})[e.name]=t,n}if(t instanceof a.TypeVar)return p(t,e);if(e instanceof a.TypeFuncApp&&t instanceof a.TypeFuncApp){if(e.constructorName!==t.constructorName)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different constructors `"+e.constructorName+"` and `"+t.constructorName+"`");if(e.args.length!==t.args.length)throw new s("Could not unify types `"+e.toString()+"` and `"+t.toString()+"` with different argument list lengths `"+e.args.length+"` and `"+t.args.length+"`");for(var r={},i=0;i<e.args.length;i++)r=u(r,p(b(e.args[i],r),b(t.args[i],r)));return r}throw new Error("Internal error, this should never happen")}function f(e,t){var n=new Set(t);return e.filter((function(e){return!n.has(e)}))}function h(e){if(e instanceof a.PolyType)return f(h(e.monoType),e.quantifiedVars);if(e instanceof a.TypeVar)return[e.name];if(e instanceof a.TypeFuncApp)return e.args.map(h).reduce((function(e,t){return o(e,t)}),[]);if(e)return Object.values(e).map(h).reduce((function(e,t){return o(e,t)}),[]);throw new Error("Internal error, this should never happen")}function l(e,t){return new a.PolyType(function(e){var t=[];return new Set(e).forEach((function(e){return t.push(e)})),t}(f(h(t),h(e))),t)}t.TypeInferenceError=s,t.substitute=c,t.combine=u,t.unify=p,t.infer=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=a.typeUtils.standardCtx);var r=0,i=function(){return"t"+r++},o=new a.TypeVar(i());if(!t)return(p=w(e,n,o,i))[o.name];var c=[],u=function(t,n){c.push({message:t,ast:d(e,n)})};u("We start algorithm M by assigning the root node a fresh type `"+o.toString()+"`",y(e));try{var p=w(e,n,o,i,u);return u("We can extract the root type `"+o.toString()+"` from the most recent substitution to get expression's type as `"+p[o.name].toString()+"`",y(e)),{accepted:!0,value:{type:p[o.name],steps:c}}}catch(f){return{accepted:!1,value:{steps:c},issuePosition:f.name==s.name&&f.expr?f.expr.pos:e.pos,message:f.message}}};var d=function e(t,n){if(t instanceof a.CharLiteral)return new a.CharLiteral(t.value,t.pos,n.get(t));if(t instanceof a.NumberLiteral)return new a.NumberLiteral(t.value,t.pos,n.get(t));if(t instanceof a.Var)return new a.Var(t.name,t.pos,n.get(t));if(t instanceof a.App)return new a.App(e(t.func,n),e(t.arg,n),t.pos,n.get(t));if(t instanceof a.Abs)return new a.Abs(t.param,e(t.body,n),t.pos,n.get(t));if(t instanceof a.Let)return new a.Let(t.param,e(t.def,n),e(t.body,n),t.pos,n.get(t));throw new Error("Internal error, this should never happen")},y=function(e){var t=new Map;return t.set(e,"highlight"),t},g=function(e,t){return("{ "+Object.keys(e).filter((function(e){return e!==t})).map((function(t){return t+" \u21a6 "+e[t].toString()})).join(", ")+" }").replace("{  }","{}")};function w(e,t,n,r,o){var f,h;if(void 0===o&&(o=function(){}),e instanceof a.CharLiteral){var d="We expect the type to unify with `"+n.toString()+"`, and we know the primitive `"+e.toString()+"` is a `Char`.";try{var v=p(n,m(new a.PolyType([],new a.TypeFuncApp("Char")),r));return o(d+"\nThese unify, giving the substitution `"+g(v)+"`",y(e)),v}catch(j){throw o(d+"\nHowever, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+j.message,y(e)),j.expr=e,j}}if(e instanceof a.NumberLiteral){d="We expect the type to unify with `"+n.toString()+"`, and we know the primitive `"+e.toString()+"` is an `Int`.";try{v=p(n,m(new a.PolyType([],new a.TypeFuncApp("Int")),r));return o(d+"\nThese unify, giving the substitution `"+g(v)+"`",y(e)),v}catch(j){throw o(d+"\nHowever, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+j.message,y(e)),j.expr=e,j}}if(e instanceof a.Var){var j,O=t[e.name];if(!O)throw o("We try to look up the variable `"+e.toString()+"` but find it is not in scope. We stop here as this is an error.",y(e)),new s("`"+e.name+"` is not in scope",e);var T=m(O,r);d="We expect this variable to unify with `"+n.toString()+"`\nWe look up the variable `"+e.toString()+"` and find it has type `"+O.toString()+"`"+(O.quantifiedVars.length?"\nWe instatiate this type with fresh type variables to get `"+T.toString()+"`":"");try{v=p(n,T);return o(d+"\nThese unify, giving the substitution `"+g(v)+"`",y(e)),v}catch(j){throw o(d+"\nHowever, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+j.message,y(e)),j.expr=e,j}}if(e instanceof a.App){var x=new a.TypeVar(r()),S=w(e.func,t,new a.TypeFuncApp("->",x,n),r,o),A=w(e.arg,c(S,t),b(x,S),r,o),F=(new a.TypeVar(r()),u(S,A));return o("As the argument unifies with the function definition the function application is valid, giving a combined substitution of `"+g(F)+"`",y(e)),F}if(e instanceof a.Abs){var k=new a.TypeVar(r()),C=new a.TypeVar(r()),V=new a.TypeFuncApp("->",k,C),N=(d="We expect this function definition to unify with a fresh function type `"+V.toString()+"` to unify with `"+n.toString()+"`",void 0);try{N=p(n,V),o(d+"\nThese unify, giving `"+g(N)+"`\nWe next will unify the body with `"+C.toString()+"`",y(e))}catch(j){throw o(d+"\nHowever, these two types are not unifiable. We stop here as this is an error.\n\nMore details:\n"+j.message,y(e)),j.expr=e,j}F=u(N,w(e.body,i(i({},c(N,t)),((f={})[e.param]=new a.PolyType([],b(k,N)),f)),b(C,N),r,o));return o("Combining the function and body substitutions gives `"+g(F)+"`",y(e)),F}if(e instanceof a.Let){o("We create a new type variable `"+(x=new a.TypeVar(r())).toString()+"` for this let statement's parameter `"+e.param+"`, then infer on the parameter and body",y(e));F=u(N=w(e.def,t,x,r,o),w(e.body,i(i({},c(N,t)),((h={})[e.param]=l(c(N,t),b(x,N)),h)),b(n,N),r,o));return o("Combining the parameter and body substitutions gives `"+g(F)+"`",y(e)),F}throw new Error("Internal error, this should never happen")}function m(e,t,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),e instanceof a.TypeVar){var i=n.indexOf(e.name);return-1===i?e:new a.TypeVar(r[i])}if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return m(e,t,n,r)})))));if(e instanceof a.PolyType)return m(e.monoType,t,e.quantifiedVars,e.quantifiedVars.map(t));throw new Error("Internal error, this should never happen")}function b(e,t){if(e instanceof a.TypeVar)return e.name in t?t[e.name]:e;if(e instanceof a.TypeFuncApp)return new(a.TypeFuncApp.bind.apply(a.TypeFuncApp,o([void 0,e.constructorName],e.args.map((function(e){return b(e,t)})))));if(e instanceof a.PolyType)return new a.PolyType(e.quantifiedVars,b(e.monoType,t));throw new Error("Internal error, this should never happen")}function v(e,t){if(e instanceof a.TypeVar)return e.name==t.name;if(e instanceof a.TypeFuncApp)return e.args.some((function(e){return v(e,t)}));if(e instanceof a.PolyType)return v(e.monoType,t)&&!e.quantifiedVars.includes(t.name);throw new Error("Internal error, this should never happen")}t.apply=b},29:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),o=n.n(i),a=n(19),s=n.n(a),c={analytics:{enabled:!0,url:"https://5lpondcp9g.execute-api.eu-west-1.amazonaws.com/"}},u=c.analytics.enabled&&"1"!==navigator.doNotTrack,p=Math.random().toString(36).slice(2),f=u?function(e){fetch(c.analytics.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:"cs310",streamId:p,data:e})})}:function(){},h=function(e,t){var n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){n=void 0,e.apply(void 0,i)}),t)}}(f,1e3),l=f,d=n(3),y=(n(29),n(23)),g=n(2),w=n(20),m=n(21),b=n(22);function v(e){var t=e.node,n=e.hoverCallback;if(t instanceof g.CharLiteral||t instanceof g.NumberLiteral)return Object(r.jsx)(j,{node:t,hoverCallback:n,children:t.value});if(t instanceof g.Var)return Object(r.jsx)(j,{node:t,hoverCallback:n,children:t.name});if(t instanceof g.App)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j,{node:t,hoverCallback:n,children:Object(r.jsx)("span",{className:"sans-serif",children:"Function application"})}),Object(r.jsx)(O,{children:Object(r.jsx)(v,{node:t.func,hoverCallback:n})}),Object(r.jsx)(O,{children:Object(r.jsx)(v,{node:t.arg,hoverCallback:n})})]});if(t instanceof g.Abs)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(j,{node:t,hoverCallback:n,children:["\u03bb",t.param]}),Object(r.jsx)(O,{symbol:"->",children:Object(r.jsx)(v,{node:t.body,hoverCallback:n})})]});if(t instanceof g.Let)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(j,{node:t,hoverCallback:n,children:["let ",t.param]}),Object(r.jsx)(O,{symbol:"=",children:Object(r.jsx)(v,{node:t.def,hoverCallback:n})}),Object(r.jsx)(O,{symbol:"in",children:Object(r.jsx)(v,{node:t.body,hoverCallback:n})})]});throw new Error("Attempted to display a node of invalid type "+typeof t)}function j(e){var t=e.children,n=e.node,i=e.hoverCallback;return Object(r.jsx)("div",{className:"ast-node "+(n.notes||""),onMouseOver:function(){return i(!0,n.pos)},onMouseOut:function(){return i(!1,n.pos)},children:t})}function O(e){var t=e.children,n=e.symbol;return Object(r.jsx)("div",{className:"ast-child","data-symbol":n,children:t})}var T=function(e){var t=e.ast,n=e.hoverCallback;return Object(r.jsx)("div",{className:"ast-view",children:Object(r.jsx)(v,{node:t,hoverCallback:n})})},x={w:w.infer,m:b.infer,"w'":m.infer};var S=function(e,t){return function(n,r){e(n?[].concat(Object(y.a)(t),[{start:r.start,end:r.end,className:"highlight-white"}]):t)}},A=function(e){var t=e.code,n=e.algorithm,o=e.setHighlights,a=Object(g.parse)(t,!0);Object(i.useEffect)((function(){return o(a.accepted?[]:[{start:a.issuePosition.start,end:a.issuePosition.end,className:"highlight-error"}])}),[a,o]);var s=a.accepted?x[n](a.value,!0):void 0;if(Object(i.useEffect)((function(){return s&&o(s.accepted?[]:[{start:s.issuePosition.start,end:s.issuePosition.end,className:"highlight-error"}])}),[s,o]),!a.accepted)return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Parse error"}),Object(r.jsx)("p",{children:a.message})]});var c=S(o,s.accepted?[]:[{start:s.issuePosition.start,end:s.issuePosition.end,className:"highlight-error"}]);return 0===s.value.steps.length&&(r.Fragment,a.value),Object(r.jsxs)(r.Fragment,{children:[s.accepted?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Expression type"}),Object(r.jsx)("p",{children:Object(r.jsx)("code",{children:s.value.type.toString()})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Type error"}),Object(r.jsx)("p",{children:"The expression does not have a valid type"})]}),Object(r.jsx)("h2",{children:"Type derivation"}),s.value.steps.map((function(e,t){return Object(r.jsxs)("div",{className:"type-derivation-step",children:[Object(r.jsxs)("h3",{children:["Step ",t+1]}),Object(r.jsx)("p",{children:e.message.split("`").map((function(e,t){return t%2===0?e:Object(r.jsx)("code",{children:e},t)}))}),Object(r.jsx)(T,{ast:e.ast,hoverCallback:c})]},t)}))]})},F=document.getElementById("body")||{style:{overflow:""}};function k(e){var t=e.type,n=e.value,i=e.setter,o=e.current;return Object(r.jsx)("button",{className:o===n?"active":void 0,onClick:function(){i(n),l({name:t+"ButtonSet",value:n})},children:n})}var C=function(){var e=Object(i.useState)("map not []"),t=Object(d.a)(e,2),n=t[0],o=t[1],a=Object(i.useState)("w"),s=Object(d.a)(a,2),c=s[0],u=s[1],p=Object(i.useState)([]),f=Object(d.a)(p,2),y=f[0],w=f[1],m=Object(i.useState)(!1),b=Object(d.a)(m,2),v=b[0],j=b[1],O=function(){j(!1),l({name:"help",value:"hide"})};F.style.overflow=v?"hidden":"";var T=Object(i.useMemo)((function(){return n&&Object(r.jsx)(A,{code:n,algorithm:c,setHighlights:w})}),[n,c]);return Object(r.jsxs)("div",{id:"main",children:[v&&Object(r.jsx)("div",{className:"modal",onClick:function(e){"modal"===e.target.className&&O()},children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsx)("button",{className:"sans-serif",onClick:function(){return O()},children:"Close"}),Object(r.jsx)("h2",{children:"Language reference"}),Object(r.jsxs)("p",{children:["The language is similar in syntax to Haskell. All functions are applied in prefix notation, i.e. ",Object(r.jsx)("code",{children:"+ 3 4"})," instead of ",Object(r.jsx)("code",{children:"3 + 4"}),". Anonymous functions only take one parameter, i.e. ",Object(r.jsxs)("code",{children:["\\x -",">"," \\y -",">"," y x"]})," instead of ",Object(r.jsxs)("code",{children:["\\x y -",">"," y x"]}),"."]}),Object(r.jsx)("p",{children:"The type constructors available are:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Int"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Char"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Bool"})}),Object(r.jsxs)("li",{children:[Object(r.jsxs)("code",{children:["-",">"]})," for functions"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("code",{children:"[]"})," for lists"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("code",{children:","}),", ",Object(r.jsx)("code",{children:",,"}),", ",Object(r.jsx)("code",{children:",,,"})," etc. for tuples"]}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Maybe"})}),Object(r.jsx)("li",{children:Object(r.jsx)("code",{children:"Either"})})]}),Object(r.jsx)("p",{children:"The available set of built-in functions and their types are:"}),Object(r.jsx)("ul",{children:Object.entries(g.typeUtils.standardCtx).filter((function(e){return","!==Object(d.a)(e,1)[0][0]})).map((function(e){var t=Object(d.a)(e,2),n=t[0],i=t[1];return Object(r.jsx)("li",{children:Object(r.jsxs)("code",{children:[n," :: ",null===i||void 0===i?void 0:i.toString()]})},n)}))})]})}),Object(r.jsx)("h1",{children:"interactive type inference"}),Object(r.jsx)("h2",{children:"Play with algorithm W in your browser."}),Object(r.jsx)("p",{children:"Type inference is the ability to determine an expression's type in a language. Hindley-Milner (HM) is a typed \u03bb-calculus which allows for complete type inference without explicit type annotations. Haskell's type system is based on HM."}),Object(r.jsxs)("p",{children:["This tool allows you to enter expressions in syntax similar to Haskell and view how a type inference algorithm (algorithm W) could work out the types. A full list of built-in functions and their types is available ",Object(r.jsx)("button",{className:"sans-serif",onClick:function(){return j(!0),void l({name:"help",value:"show"})},"data-testid":"help-open-button",children:"here"}),". Expressions must be given in prefix notation, i.e. ",Object(r.jsx)(k,{type:"button",value:"+ 3 4",current:n,setter:o})," instead of ",Object(r.jsx)(k,{type:"code",value:"3 + 4",current:n,setter:o}),"."]}),Object(r.jsx)("p",{children:"Usage data such as button clicks and evaluated expressions may be collected to evaluate and improve the tool."}),Object(r.jsxs)("h2",{children:["Algorithm:",Object(r.jsx)(k,{type:"algorithm",value:"w",current:c,setter:u}),Object(r.jsx)(k,{type:"algorithm",value:"w'",current:c,setter:u}),Object(r.jsx)(k,{type:"algorithm",value:"m",current:c,setter:u})]}),Object(r.jsxs)("h2",{children:["Samples:",Object(r.jsx)(k,{type:"code",value:"4",current:n,setter:o}),Object(r.jsx)(k,{type:"code",value:"not",current:n,setter:o}),Object(r.jsx)(k,{type:"code",value:"odd 5",current:n,setter:o}),Object(r.jsx)(k,{type:"code",value:"map not []",current:n,setter:o}),Object(r.jsx)(k,{type:"code",value:"fst",current:n,setter:o}),Object(r.jsx)("br",{className:"md-only"}),Object(r.jsx)(k,{type:"code",value:"Just",current:n,setter:o}),Object(r.jsx)(k,{type:"code",value:"let x = 3 in (+, x)",current:n,setter:o}),Object(r.jsx)(k,{type:"code",value:"\\x -> / x 2",current:n,setter:o}),Object(r.jsx)(k,{type:"code",value:": 23 [1]",current:n,setter:o})]}),Object(r.jsxs)("div",{className:"code-container",children:[Object(r.jsx)("input",{placeholder:"Enter code...",value:n,onChange:function(e){o(e.target.value),h({name:"codeChange",value:e.target.value})}}),n&&y.map((function(e,t){return Object(r.jsxs)("p",{children:[n.slice(0,e.start),Object(r.jsx)("span",{className:e.className,children:n.slice(e.start,e.end)}),n.slice(e.end)]},t)}))]}),T]})};l({name:"load"}),s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(C,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.deb0c98b.chunk.js.map